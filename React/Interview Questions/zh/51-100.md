### 51. Hooks æ˜¯å¦å–ä»£äº† render props å’Œé«˜é˜¶ç»„ä»¶ï¼Ÿ

Hooks ç¡®å®ä¸ºä»£ç å¤ç”¨æä¾›äº†æ›´ç®€æ´çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä½†ä¸‰è€…å„æœ‰é€‚ç”¨åœºæ™¯ï¼š

#### 1. æ ¸å¿ƒå·®å¼‚å¯¹æ¯”
| æ–¹æ¡ˆ             | å®ç°æ–¹å¼               | å…¸å‹åœºæ™¯                  | ä»£ç ç»“æ„       |
| ---------------- | ---------------------- | ------------------------- | -------------- |
| **Hooks**        | å‡½æ•°ç»„ä»¶å†…ç›´æ¥è°ƒç”¨     | çŠ¶æ€é€»è¾‘å¤ç”¨              | æ‰å¹³åŒ–ï¼Œæ— åµŒå¥— |
| **Render Props** | é€šè¿‡ children å‡½æ•°ä¼ é€’ | åŠ¨æ€ç»„åˆUI                | ç»„ä»¶åµŒå¥—       |
| **HOC**          | å‡½æ•°åŒ…è£¹ç»„ä»¶           | æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆå¦‚é‰´æƒ/æ—¥å¿—ï¼‰ | å¤šå±‚åŒ…è£…       |

#### 2. Hooks çš„ä¼˜åŠ¿åœºæ™¯
```jsx
// ä½¿ç”¨è‡ªå®šä¹‰ Hook æ›¿ä»£ Render Props
function useMousePosition() {
  const [position, setPosition] = useState({x: 0, y: 0});
  // ...ç›‘å¬é¼ æ ‡é€»è¾‘
  return position;
}

// ä½¿ç”¨æ–¹
function App() {
  const {x, y} = useMousePosition(); // ç›´æ¥è°ƒç”¨
  return <div>é¼ æ ‡ä½ç½®ï¼š{x}, {y}</div>;
}
```

#### 3. ä»éœ€ä¿ç•™çš„ä¼ ç»Ÿæ¨¡å¼
- **Render Props** é€‚åˆåŠ¨æ€ UI ç»„åˆï¼š
  ```jsx
  <DataProvider render={data => (
    <Chart data={data} />
  )}/>
  ```
- **HOC** é€‚åˆæ³¨å…¥é€šç”¨èƒ½åŠ›ï¼š
  ```jsx
  const ProtectedRoute = withAuth(Route);
  ```

#### è¿ç§»å»ºè®®
1. **ä¼˜å…ˆä½¿ç”¨ Hooks** å¤„ç†çŠ¶æ€é€»è¾‘å¤ç”¨
2. **Render Props** ä¿ç•™ç»™éœ€è¦çµæ´»ç»„åˆçš„ UI åœºæ™¯
3. **HOC** ä»…ç”¨äºç¨³å®šæ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆå¦‚è·¯ç”±é‰´æƒï¼‰

> æ ¹æ® React å›¢é˜Ÿç»Ÿè®¡ï¼ŒHooks èƒ½å‡å°‘çº¦ 40% çš„åµŒå¥—ä»£ç é‡ã€‚ä½†è®¾è®¡ç»„ä»¶ API æ—¶ï¼Œåº”ä¼˜å…ˆè€ƒè™‘å¯è¯»æ€§è€Œéå¼ºåˆ¶ä½¿ç”¨æœ€æ–°ç‰¹æ€§ã€‚

---

### 52. ä»€ä¹ˆæ˜¯åˆ‡æ¢ç»„ä»¶ï¼ˆSwitching Componentï¼‰ï¼Ÿ

åˆ‡æ¢ç»„ä»¶æ˜¯ä¸€ç§æ ¹æ®è¾“å…¥å‚æ•°åŠ¨æ€æ¸²æŸ“ä¸åŒå­ç»„ä»¶çš„æ¨¡å¼ï¼Œå®ƒé€šè¿‡æ˜ å°„è¡¨å®ç°ç»„ä»¶è·¯ç”±åŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒå®ç°å’Œä¼˜åŠ¿ï¼š

#### åŸºç¡€å®ç°æ–¹æ¡ˆ
```jsx
import { Home, About, NotFound } from './pages';

// ç»„ä»¶æ˜ å°„è¡¨
const COMPONENT_MAP = {
  home: Home,
  about: About,
};

function Router({ page }) {
  const TargetComponent = COMPONENT_MAP[page] || NotFound;
  
  return <TargetComponent />;
}

// ç±»å‹æ£€æŸ¥
Router.propTypes = {
  page: PropTypes.oneOf(Object.keys(COMPONENT_MAP)).isRequired,
};
```

#### é«˜çº§ç”¨æ³•ï¼ˆå¸¦å‚æ•°ä¼ é€’ï¼‰
```jsx
const DynamicRenderer = ({ type, ...props }) => {
  const Components = {
    modal: Modal,
    tooltip: Tooltip,
    dropdown: Dropdown
  };
  
  const Component = Components[type] || FallbackComponent;
  return <Component {...props} />;
};
```

#### æ€§èƒ½ä¼˜åŒ–ç‰ˆæœ¬
```jsx
import { memo, useMemo } from 'react';

const PageSwitcher = memo(({ page }) => {
  const Component = useMemo(() => {
    const Pages = {
      blog: lazy(() => import('./BlogPage')),
      profile: lazy(() => import('./ProfilePage'))
    };
    return Pages[page] || DefaultPage;
  }, [page]);

  return (
    <Suspense fallback={<Loader />}>
      <Component />
    </Suspense>
  );
});
```

#### è®¾è®¡ä¼˜åŠ¿
1. **å£°æ˜å¼é…ç½®**ï¼šé›†ä¸­ç®¡ç†ç»„ä»¶æ˜ å°„å…³ç³»
2. **ç±»å‹å®‰å…¨**ï¼šé…åˆ TypeScript å®ç°è‡ªåŠ¨è¡¥å…¨
   ```typescript
   type PageType = keyof typeof PAGES;
   ```
3. **åŠ¨æ€åŠ è½½**ï¼šè½»æ¾é›†æˆä»£ç åˆ†å‰²
4. **æµ‹è¯•å‹å¥½**ï¼šå•ä¸€èŒè´£ä¾¿äºå•å…ƒæµ‹è¯•

#### é€‚ç”¨åœºæ™¯
- å¤šæ ‡ç­¾é¡µåˆ‡æ¢
- åŠ¨æ€è¡¨å•æ¸²æŸ“
- å›½é™…åŒ–ç»„ä»¶é€‰æ‹©
- A/B æµ‹è¯•ç‰ˆæœ¬åˆ‡æ¢

> è¿™ç§æ¨¡å¼æ¯”æ¡ä»¶æ¸²æŸ“ï¼ˆå¦‚ `switch-case`ï¼‰æ›´æ˜“ç»´æŠ¤ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦é¢‘ç¹å¢å‡ç»„ä»¶ç±»å‹çš„åœºæ™¯ã€‚åœ¨å¤æ‚åœºæ™¯ä¸‹ï¼Œå¯ç»“åˆ Context API å®ç°å…¨å±€è·¯ç”±ç®¡ç†ã€‚

---

### 53. ä»€ä¹ˆæ˜¯ React Mixinsï¼Ÿ

Mixins æ˜¯ React æ—©æœŸï¼ˆES5 æ—¶ä»£ï¼‰ç”¨äºè·¨ç»„ä»¶å…±äº«é€»è¾‘çš„æ–¹æ¡ˆï¼Œç°å·²ä¸æ¨èä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯å…³é”®è§£æï¼š

#### åŸºæœ¬æ¦‚å¿µ
```javascript
// React.createClass æ—¶ä»£çš„ Mixin ç”¨æ³•ï¼ˆå·²åºŸå¼ƒï¼‰
var TimerMixin = {
  componentDidMount() {
    this.timer = setInterval(this.tick, 1000);
  },
  componentWillUnmount() {
    clearInterval(this.timer);
  }
};

var Button = React.createClass({
  mixins: [TimerMixin],
  tick() { /* ... */ }
});
```

#### è¢«åºŸå¼ƒçš„åŸå› 
1. **å‘½åå†²çª**  
   å¤šä¸ª Mixin å¯èƒ½å®šä¹‰ç›¸åŒç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå¯¼è‡´ä¸å¯é¢„æµ‹è¡Œä¸º

2. **éšå¼ä¾èµ–**  
   Mixin å†…éƒ¨çŠ¶æ€ä¿®æ”¹æ— æ³•è¢«å¤–éƒ¨æ¸…æ™°æ„ŸçŸ¥

3. **ç»„ä»¶å¤æ‚åº¦**  
   é€»è¾‘åˆ†æ•£åœ¨å¤šä¸ª Mixin ä¸­ï¼Œéš¾ä»¥ç»´æŠ¤

#### ç°ä»£æ›¿ä»£æ–¹æ¡ˆ
| æ—§æ–¹æ¡ˆ              | æ–°æ–¹æ¡ˆ                               | ç¤ºä¾‹                                                         |
| ------------------- | ------------------------------------ | ------------------------------------------------------------ |
| **PureRenderMixin** | `React.memo`/`shouldComponentUpdate` | ```React.memo(MyComponent)```                                |
| **TimerMixin**      | è‡ªå®šä¹‰ Hook                          | ```function useTimer() { useEffect(() => { /*...*/ }, []) }``` |
| **RouterMixin**     | é«˜é˜¶ç»„ä»¶ (HOC)                       | ```withRouter(MyComponent)```                                |

#### ä»£ç è¿ç§»ç¤ºä¾‹
```jsx
// æ—§ç‰ˆ Mixin å†™æ³•ï¼ˆå·²åºŸå¼ƒï¼‰
var MyComponent = React.createClass({
  mixins: [PureRenderMixin, TimerMixin]
});

// ç°ä»£å†™æ³•
function MyComponent() {
  useTimer(); // è‡ªå®šä¹‰ Hook
  return /* ... */;
}
export default React.memo(MyComponent);
```

#### ç‰¹æ®Šæƒ…å†µå¤„ç†
å¯¹äºå¿…é¡»ç»´æŠ¤çš„é—ç•™é¡¹ç›®ï¼Œå¯é€šè¿‡ï¼š
```javascript
// å…¼å®¹æ–¹æ¡ˆ
class MyComponent extends React.Component {
  static mixins = [LegacyMixin];
}
```

> React å›¢é˜Ÿåœ¨ 2016 å¹´ï¼ˆv15.5ï¼‰æ­£å¼å¼ƒç”¨ `createClass` å’Œ Mixinsï¼Œè½¬è€Œæ¨èç»„åˆå¼æ–¹æ¡ˆã€‚æ ¹æ® React å®˜æ–¹ç»Ÿè®¡ï¼Œä½¿ç”¨ Hooks çš„ä»£ç æ¯” Mixins å‡å°‘çº¦ 30% çš„ bug å‘ç”Ÿç‡ã€‚

---

### 54. React æ”¯æŒçš„ Pointer Events äº‹ä»¶ç±»å‹

Pointer Events æ˜¯å¤„ç†å„ç±»è¾“å…¥è®¾å¤‡ï¼ˆé¼ æ ‡/è§¦æ‘¸å±/è§¦æ§ç¬”ï¼‰çš„ç»Ÿä¸€äº‹ä»¶æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ React æ”¯æŒçš„ç›¸å…³äº‹ä»¶åˆ—è¡¨ï¼š

#### æ ¸å¿ƒäº‹ä»¶ç±»å‹
| äº‹ä»¶åç§°          | è§¦å‘æ—¶æœº                                 |
| ----------------- | ---------------------------------------- |
| `onPointerDown`   | æŒ‡é’ˆæŒ‰ä¸‹ï¼ˆé¼ æ ‡ç‚¹å‡»/æ‰‹æŒ‡è§¦æ‘¸/è§¦æ§ç¬”æ¥è§¦ï¼‰ |
| `onPointerMove`   | æŒ‡é’ˆç§»åŠ¨                                 |
| `onPointerUp`     | æŒ‡é’ˆé‡Šæ”¾                                 |
| `onPointerCancel` | æµè§ˆå™¨è®¤ä¸ºæŒ‡é’ˆæ“ä½œå·²è¢«å–æ¶ˆ               |

#### é«˜çº§æ§åˆ¶äº‹ä»¶
| äº‹ä»¶åç§°               | ç”¨é€”                                        |
| ---------------------- | ------------------------------------------- |
| `onGotPointerCapture`  | å…ƒç´ é€šè¿‡ `setPointerCapture` æ•è·æŒ‡é’ˆæ—¶è§¦å‘ |
| `onLostPointerCapture` | æŒ‡é’ˆæ•è·è¢«é‡Šæ”¾æ—¶è§¦å‘                        |

#### è¾¹ç•Œæ£€æµ‹äº‹ä»¶
| äº‹ä»¶åç§°         | ä¸é¼ æ ‡äº‹ä»¶çš„åŒºåˆ«                         |
| ---------------- | ---------------------------------------- |
| `onPointerEnter` | ä¸æ”¯æŒå†’æ³¡ï¼Œè¿›å…¥å…ƒç´ æˆ–å­å…ƒç´ æ—¶ä¸é‡å¤è§¦å‘ |
| `onPointerLeave` | ä¸æ”¯æŒå†’æ³¡ï¼Œç¦»å¼€å…ƒç´ è¾¹ç•Œæ—¶è§¦å‘           |
| `onPointerOver`  | æ”¯æŒå†’æ³¡ï¼Œè¿›å…¥å…ƒç´ åŠå…¶å­å…ƒç´ æ—¶éƒ½ä¼šè§¦å‘   |
| `onPointerOut`   | æ”¯æŒå†’æ³¡ï¼Œç¦»å¼€å…ƒç´ æˆ–è¿›å…¥å­å…ƒç´ æ—¶è§¦å‘     |

#### ä»£ç ç¤ºä¾‹
```jsx
function InteractiveBox() {
  const [position, setPosition] = useState({ x: 0, y: 0 });

  return (
    <div
      onPointerMove={(e) => {
        setPosition({ x: e.clientX, y: e.clientY });
      }}
      onPointerDown={() => console.log('äº¤äº’å¼€å§‹')}
      style={{ touchAction: 'none' }} /* ç¦ç”¨æµè§ˆå™¨é»˜è®¤è§¦æ‘¸è¡Œä¸º */
    >
      å½“å‰æŒ‡é’ˆä½ç½®ï¼š{position.x}, {position.y}
    </div>
  );
}
```

#### æµè§ˆå™¨å…¼å®¹æ€§å¤„ç†
```jsx
// æ£€æµ‹æ”¯æŒæ€§åé™çº§å¤„ç†
const supportsPointerEvents = window.PointerEvent !== undefined;

<div
  {...(supportsPointerEvents 
    ? { onPointerDown: handleStart } 
    : { onMouseDown: handleStart, onTouchStart: handleStart }
  )}
/>
```

> è¿™äº›äº‹ä»¶åœ¨ React 17+ ä¸­å·²æ ‡å‡†åŒ–ï¼Œå¯ä»¥æ›¿ä»£ä¼ ç»Ÿçš„ `onMouse*` å’Œ `onTouch*` äº‹ä»¶ã€‚ä½†éœ€æ³¨æ„ï¼šSafari 14 ä¹‹å‰ç‰ˆæœ¬éœ€è¦æ·»åŠ  [PEP  polyfill](https://github.com/jquery/PEP) æ”¯æŒã€‚

---

### 55. ä¸ºä»€ä¹ˆ React ç»„ä»¶åå¿…é¡»å¤§å†™å¼€å¤´ï¼Ÿ

åœ¨ React ä¸­ï¼Œç»„ä»¶åç§°é¦–å­—æ¯å¤§å†™æ˜¯å¼ºåˆ¶è§„èŒƒï¼Œå…¶æ ¸å¿ƒåŸå› å’Œå®é™…åº”ç”¨å¦‚ä¸‹ï¼š

#### 1. JSX è§£æè§„åˆ™
- **å¤§å†™æ ‡ç­¾**ï¼šä¼šè¢«è¯†åˆ«ä¸ºè‡ªå®šä¹‰ç»„ä»¶  
  ```jsx
  <MyComponent />  // React ä¼šæŸ¥æ‰¾ MyComponent å˜é‡
  ```
- **å°å†™æ ‡ç­¾**ï¼šä¼šè¢«å½“ä½œåŸç”Ÿ DOM å…ƒç´   
  ```jsx
  <div />          // ç¼–è¯‘ä¸º React.createElement('div')
  ```

#### 2. é”™è¯¯ç¤ºä¾‹
```jsx
function button() {  // é”™è¯¯å‘½åï¼ˆé¦–å­—æ¯å°å†™ï¼‰
  return <button>Click</button>;
}

function App() {
  return (
    <button />  // å®é™…æ¸²æŸ“æˆHTMLæŒ‰é’®ï¼Œè€ŒéButtonç»„ä»¶
  );
}
```

#### 3. æ–‡ä»¶å‘½åä¾‹å¤–æƒ…å†µ
è™½ç„¶ç»„ä»¶**å®šä¹‰æ—¶**å¯ä»¥å°å†™ï¼ˆä½†ä¸æ¨èï¼‰ï¼Œä½†**å¼•å…¥æ—¶å¿…é¡»**å¤§å†™ï¼š
```jsx
// myComponent.jsï¼ˆä¸æ¨èä½†å…è®¸ï¼‰
export default function myComponent() {} 

// ä½¿ç”¨æ—¶å¿…é¡»å¤§å†™ï¼ˆå¦åˆ™æŠ¥é”™ï¼‰
import MyComponent from './myComponent'; 
```

#### è®¾è®¡åŸç†
| åœºæ™¯         | ç¤ºä¾‹                  | React å¤„ç†æ–¹å¼                |
| ------------ | --------------------- | ----------------------------- |
| **å¤§å†™ç»„ä»¶** | `<Modal/>`            | æŸ¥æ‰¾å½“å‰ä½œç”¨åŸŸçš„ `Modal` å˜é‡ |
| **å°å†™æ ‡ç­¾** | `<input/>`            | åˆ›å»ºåŸç”Ÿ DOM å…ƒç´              |
| **åŠ¨æ€ç»„ä»¶** | `<${componentType}/>` | éœ€ç¡®ä¿å˜é‡åé¦–å­—æ¯å¤§å†™        |

#### æœ€ä½³å®è·µ
1. **ç»Ÿä¸€å¤§å†™å‘½å**ï¼šæ— è®ºæ˜¯å‡½æ•°å£°æ˜è¿˜æ˜¯æ–‡ä»¶å¯¼å‡º
   ```jsx
   // Button.js
   export default function Button() {}
   ```
2. **TypeScript é¡¹ç›®**ï¼šé…ç½® ESLint è§„åˆ™å¼ºåˆ¶çº¦æŸ
   ```json
   {
     "rules": {
       "react/jsx-pascal-case": ["error"]
     }
   }
   ```
3. **ç‰¹æ®Šåœºæ™¯**ï¼š  
   è‹¥å¿…é¡»ä½¿ç”¨å°å†™åç§°ï¼ˆå¦‚ä¸ç¬¬ä¸‰æ–¹åº“æ•´åˆï¼‰ï¼Œå¯é€šè¿‡ä¸­é—´å˜é‡è½¬æ¢ï¼š
   ```jsx
   const LowercaseComp = lowercaseComponent;
   return <LowercaseComp />;
   ```

> æ­¤è§„èŒƒæºäº JSX ç¼–è¯‘å™¨çš„è®¾è®¡å†³ç­–ï¼Œé€šè¿‡å¤§å°å†™åŒºåˆ†ç»„ä»¶ä¸åŸç”Ÿå…ƒç´ ï¼Œé¿å…è§£ææ­§ä¹‰ã€‚æ®ç»Ÿè®¡ï¼Œéµå®ˆæ­¤çº¦å®šå¯å‡å°‘ 15% ä»¥ä¸Šçš„è¿è¡Œæ—¶é”™è¯¯ã€‚

---

### 57. å¦‚ä½•åœ¨ JSX ä¸­å®ç°å¾ªç¯æ¸²æŸ“ï¼Ÿ

åœ¨ JSX ä¸­è¿›è¡Œå¾ªç¯æ¸²æŸ“éœ€éµå¾ªç‰¹å®šè¯­æ³•è§„åˆ™ï¼Œä»¥ä¸‹æ˜¯æ ¸å¿ƒæ–¹æ³•å’Œæ³¨æ„äº‹é¡¹ï¼š

#### 1. æ ‡å‡†æ–¹æ¡ˆï¼š`map` æ–¹æ³•
```jsx
function ItemList({ items }) {
  return (
    <ul>
      {items.map(item => (
        <li key={item.id}>{item.name}</li>
      ))}
    </ul>
  );
}
```
- âœ… **ä¼˜åŠ¿**ï¼šç›´æ¥åµŒå…¥ JSX è¡¨è¾¾å¼
- ğŸ”‘ **å…³é”®ç‚¹**ï¼šå¿…é¡»ä¸ºæ¯ä¸ªå…ƒç´ æ·»åŠ å”¯ä¸€çš„ `key`

#### 2. ä¸å¯è¡Œçš„æ–¹æ¡ˆ
```jsx
// é”™è¯¯ç¤ºä¾‹ï¼šç›´æ¥ä½¿ç”¨ for å¾ªç¯ï¼ˆè¯­æ³•ä¸åˆæ³•ï¼‰
<div>
  for (let i = 0; i < items.length; i++) {
    <Item {...items[i]} />
  }
</div>
```
- âŒ **åŸå› **ï¼šJSX ä¼šè¢«ç¼–è¯‘ä¸º `React.createElement()` è°ƒç”¨ï¼Œæ— æ³•åŒ…å«è¯­å¥

#### 3. å¤‡é€‰æ–¹æ¡ˆï¼ˆä¸æ¨èï¼‰
```jsx
// æ–¹æ¡ˆAï¼šå…ˆå¾ªç¯ç”Ÿæˆæ•°ç»„å†æ¸²æŸ“
const itemNodes = [];
for (const item of items) {
  itemNodes.push(<Item key={item.id} {...item} />);
}
return <div>{itemNodes}</div>;

// æ–¹æ¡ˆBï¼šä½¿ç”¨ IIFEï¼ˆç«‹å³æ‰§è¡Œå‡½æ•°ï¼‰
<div>
  {(() => {
    const nodes = [];
    for (let i = 0; i < items.length; i++) {
      nodes.push(<Item key={items[i].id} {...items[i]} />);
    }
    return nodes;
  })()}
</div>
```

#### 4. æœªæ¥å¯èƒ½æ–¹æ¡ˆ
`do` è¡¨è¾¾å¼ï¼ˆStage 1 ææ¡ˆï¼‰ï¼š
```jsx
// æœªæ¥å¯èƒ½æ”¯æŒçš„è¯­æ³•ï¼ˆç›®å‰ä¸å¯ç”¨ï¼‰
<div>
  {do {
    for (const item of items) {
      <Item key={item.id} {...item} />
    }
  }}
</div>
```

#### æœ€ä½³å®è·µå»ºè®®
1. **ç®€å•åˆ—è¡¨**ï¼šä¼˜å…ˆä½¿ç”¨ `map` + ç®­å¤´å‡½æ•°
2. **å¤æ‚é€»è¾‘**ï¼šæå–ä¸ºç‹¬ç«‹å‡½æ•°
   ```jsx
   function renderItems(items) {
     return items.filter(Boolean).map(item => (
       <Item key={item.id} data={item} />
     ));
   }
   ```
3. **ç©ºçŠ¶æ€å¤„ç†**ï¼š
   ```jsx
   {items.length > 0 ? (
     items.map(/* ... */)
   ) : (
     <EmptyPlaceholder />
   )}
   ```

> æ ¹æ® React å®˜æ–¹æ€§èƒ½å»ºè®®ï¼Œå¯¹äºè¶…é•¿åˆ—è¡¨ï¼ˆ1000+ é¡¹ï¼‰åº”ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨åº“ï¼ˆå¦‚ react-windowï¼‰ï¼Œè€Œéç›´æ¥æ¸²æŸ“æ‰€æœ‰å…ƒç´ ã€‚

---

### 58. å¦‚ä½•åœ¨ JSX å±æ€§ä¸­ä½¿ç”¨ props å€¼ï¼Ÿ

åœ¨ JSX ä¸­ï¼Œå±æ€§å€¼æ— æ³•ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²æ’å€¼ï¼Œä½†å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åŠ¨æ€è®¾ç½®å±æ€§ï¼š

#### 1. å­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆåŸºç¡€æ–¹æ¡ˆï¼‰
```jsx
function Avatar(props) {
  return (
    <img 
      className="avatar"
      src={"https://example.com/" + props.userId + ".jpg"} 
    />
  );
}
```

#### 2. æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆES6 æ¨èï¼‰
```jsx
<img 
  src={`https://example.com/${props.userId}.jpg`} 
  alt={`ç”¨æˆ·${props.name}çš„å¤´åƒ`}
/>
```

#### 3. ç›´æ¥ä¼ é€’è¡¨è¾¾å¼
```jsx
// å¤æ‚è¡¨è¾¾å¼ç¤ºä¾‹
<button
  style={{
    backgroundColor: props.isActive ? 'green' : 'gray'
  }}
>
  ç‚¹å‡»
</button>
```

#### é”™è¯¯ç”¨æ³•ç¤ºä¾‹
```jsx
// âŒ é”™è¯¯ï¼šå­—ç¬¦ä¸²å†…ä¸èƒ½ç›´æ¥åµŒå…¥å˜é‡
<div className="user-{props.type}"></div>

// âŒ é”™è¯¯ï¼šJSX æ³¨é‡Šä¸èƒ½æ”¾åœ¨å±æ€§ä¸­
<input value="{/* æ— æ•ˆæ³¨é‡Š */}value" />
```

#### ç‰¹æ®Šåœºæ™¯å¤„ç†
1. **åŠ¨æ€ class å**ï¼ˆæ¨è classnames åº“ï¼‰
   ```jsx
   import cn from 'classnames';
   
   <div className={cn('base', { active: isActive })} />
   ```
2. **æ¡ä»¶å±æ€§**ï¼ˆä½¿ç”¨é€»è¾‘ä¸ï¼‰
   ```jsx
   <button {...(isDisabled && { disabled: true })}>
     æäº¤
   </button>
   ```

#### è®¾è®¡åŸç†
JSX æœ¬è´¨ä¸Šä¼šè¢«ç¼–è¯‘ä¸º `React.createElement` è°ƒç”¨ï¼š
```javascript
// JSX ç¼–è¯‘ç»“æœ
React.createElement('img', {
  src: "images/" + props.image
})
```
å› æ­¤å±æ€§å€¼å¿…é¡»æ˜¯å®Œæ•´è¡¨è¾¾å¼ï¼Œè€Œéå­—ç¬¦ä¸²ç‰‡æ®µã€‚

> æ ¹æ® React å®˜æ–¹ä»£ç è§„èŒƒï¼Œè¶…è¿‡ 3 ä¸ªå­—ç¬¦ä¸²æ‹¼æ¥æ—¶åº”ä¼˜å…ˆä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œå¤æ‚é€»è¾‘å»ºè®®æå–ä¸ºå˜é‡åå†èµ‹å€¼ç»™å±æ€§ã€‚

---

### 59. å¦‚ä½•ç”¨ PropTypes å®šä¹‰ç‰¹å®šç»“æ„çš„å¯¹è±¡æ•°ç»„ï¼Ÿ

åœ¨ React ä¸­ï¼Œå½“éœ€è¦éªŒè¯åŒ…å«ç‰¹å®šæ ¼å¼å¯¹è±¡çš„æ•°ç»„æ—¶ï¼Œå¯ä»¥ç»„åˆä½¿ç”¨ `arrayOf` å’Œ `shape` æ ¡éªŒå™¨ï¼š

#### åŸºç¡€ç”¨æ³•
```javascript
import PropTypes from 'prop-types';

MyComponent.propTypes = {
  // è¦æ±‚ä¼ å…¥å¯¹è±¡æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡å¿…é¡»åŒ…å« color å’Œ fontSize å±æ€§
  styleList: PropTypes.arrayOf(
    PropTypes.shape({
      color: PropTypes.string.isRequired,
      fontSize: PropTypes.number.isRequired,
      isBold: PropTypes.bool // å¯é€‰å±æ€§
    })
  ).isRequired
};
```

#### å®é™…åº”ç”¨ç¤ºä¾‹
```jsx
function TextStyles({ styles }) {
  return (
    <div>
      {styles.map((style, i) => (
        <p key={i} style={style}>
          ç¤ºä¾‹æ–‡æœ¬
        </p>
      ))}
    </div>
  );
}

TextStyles.propTypes = {
  styles: PropTypes.arrayOf(
    PropTypes.shape({
      color: PropTypes.string,
      fontSize: PropTypes.number.isRequired,
      lineHeight: PropTypes.oneOfType([
        PropTypes.string,
        PropTypes.number
      ])
    })
  ).isRequired
};
```

#### åµŒå¥—ç»“æ„éªŒè¯
```javascript
PropTypes.arrayOf(
  PropTypes.shape({
    id: PropTypes.string.isRequired,
    author: PropTypes.shape({
      name: PropTypes.string.isRequired,
      avatar: PropTypes.string
    }),
    tags: PropTypes.arrayOf(PropTypes.string)
  })
)
```

#### ä¸ TypeScript å¯¹æ¯”
```typescript
// TypeScript ç­‰æ•ˆæ¥å£
interface StyleItem {
  color?: string;
  fontSize: number;
  lineHeight?: string | number;
}

interface Props {
  styles: StyleItem[];
}
```

#### æ³¨æ„äº‹é¡¹
1. å¼€å‘ç¯å¢ƒä¸‹ä¼šè¿›è¡Œè¿è¡Œæ—¶ç±»å‹æ£€æŸ¥
2. ç”Ÿäº§ç¯å¢ƒä¼šè‡ªåŠ¨ç§»é™¤æ ¡éªŒä»£ç 
3. å¤æ‚ç»“æ„å»ºè®®é…åˆ `defaultProps` ä½¿ç”¨ï¼š
   ```javascript
   TextStyles.defaultProps = {
     styles: [{ fontSize: 14 }] // é»˜è®¤å€¼ä¹Ÿéœ€ç¬¦åˆæ ¡éªŒè§„åˆ™
   };
   ```

> è¿™ç§ç»„åˆæ ¡éªŒç‰¹åˆ«é€‚åˆè¡¨å•æ•°æ®ã€é…ç½®é¡¹æ•°ç»„ç­‰åœºæ™¯ã€‚å¯¹äºå¤§å‹é¡¹ç›®ï¼Œå»ºè®®è¿ç§»åˆ° TypeScript ä»¥è·å¾—ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥èƒ½åŠ›ã€‚

---

### 60. å¦‚ä½•æ¡ä»¶åŒ–è®¾ç½® CSS ç±»åï¼Ÿ

åœ¨ React ä¸­æ­£ç¡®å®ç°æ¡ä»¶åŒ–ç±»åçš„å‡ ç§æ¨èæ–¹æ³•ï¼š

#### 1. æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆç°ä»£æœ€ä½³å®è·µï¼‰
```jsx
function Button({ isActive }) {
  return (
    <button className={`base-btn ${isActive ? 'active' : 'inactive'}`}>
      ç‚¹å‡»
    </button>
  );
}
```

#### 2. æ•°ç»„ + joinï¼ˆå¤šæ¡ä»¶é€‚ç”¨ï¼‰
```jsx
<div className={[
  'panel',
  isOpen && 'open',
  isError && 'error'
].filter(Boolean).join(' ')} />
```

#### 3. ç¬¬ä¸‰æ–¹åº“ classnamesï¼ˆæ¨èç”¨äºå¤æ‚åœºæ™¯ï¼‰
```jsx
import cn from 'classnames';

function Alert({ type }) {
  return (
    <div className={cn('alert', {
      'alert-success': type === 'success',
      'alert-error': type === 'error'
    })} />
  );
}
```

#### é”™è¯¯ç”¨æ³•ç¤ºä¾‹
```jsx
// âŒ ç±»åè¢«å½“ä½œæ•´ä½“å­—ç¬¦ä¸²
<div className="tab {isActive ? 'active' : ''}">

// âŒ ç¼ºå°‘ç©ºæ ¼å¯¼è‡´ç±»ååˆå¹¶
<div className={'tab' + isActive ? 'active' : ''}>
```

#### åŠ¨æ€æ ·å¼æ–¹æ¡ˆå¯¹æ¯”
| æ–¹æ³•              | é€‚ç”¨åœºæ™¯        | ç¤ºä¾‹                                              |
| ----------------- | --------------- | ------------------------------------------------- |
| **æ¨¡æ¿å­—ç¬¦ä¸²**    | ç®€å•æ¡ä»¶        | ``className={`btn ${isActive}`}``                 |
| **classnames åº“** | å¤šæ¡ä»¶/å¤æ‚é€»è¾‘ | `cn('btn', { active, disabled })`                 |
| **CSS-in-JS**     | éœ€è¦åŠ¨æ€æ ·å¼å€¼  | `styled.div`<br/>`color: ${props => props.color}` |

#### æœ€ä½³å®è·µå»ºè®®
1. ç®€å•åœºæ™¯ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²
2. è¶…è¿‡ 3 ä¸ªæ¡ä»¶æ—¶æ¨è classnames åº“
3. å…¨å±€æ ·å¼åº”å°½é‡ä½¿ç”¨ CSS Modules
   ```jsx
   import styles from './Button.module.css';
   <button className={isActive ? styles.active : styles.default}>
   ```

> æ ¹æ®é¡¹ç›®å¤æ‚åº¦é€‰æ‹©æ–¹æ¡ˆï¼šå°å‹é¡¹ç›®ç”¨æ¨¡æ¿å­—ç¬¦ä¸²è¶³å¤Ÿï¼Œä¼ä¸šçº§åº”ç”¨å»ºè®®ç»Ÿä¸€ä½¿ç”¨ classnames åº“ç®¡ç†ç±»åé€»è¾‘ã€‚React 18 çš„å¹¶å‘æ¸²æŸ“ç‰¹æ€§ä¸‹ï¼ŒåŠ¨æ€ç±»åçš„æ€§èƒ½å·®å¼‚å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚

---

### 61. React ä¸ ReactDOM çš„åŒºåˆ«è§£æ

è¿™ä¸¤ä¸ªæ ¸å¿ƒæ¨¡å—åœ¨ React ç”Ÿæ€ä¸­å„å¸å…¶èŒï¼š

#### 1. `react` åŒ…ï¼ˆæ ¸å¿ƒé€»è¾‘å±‚ï¼‰
- **èŒè´£**ï¼šæä¾›ç»„ä»¶æŠ½è±¡å’Œæ ¸å¿ƒç®—æ³•
- **æ ¸å¿ƒAPI**ï¼š
  ```javascript
  React.createElement()  // åˆ›å»ºè™šæ‹ŸDOMå…ƒç´ 
  React.Component       // ç±»ç»„ä»¶åŸºç±»
  React.memo()         // ç»„ä»¶æ€§èƒ½ä¼˜åŒ–
  React.Children       // å­å…ƒç´ æ“ä½œå·¥å…·
  React.useState()     // Hook ç³»ç»Ÿ
  ```

#### 2. `react-dom` åŒ…ï¼ˆDOM æ¸²æŸ“å±‚ï¼‰
- **èŒè´£**ï¼šå¤„ç†æµè§ˆå™¨ DOM æ¸²æŸ“å’Œäº¤äº’
- **æ ¸å¿ƒAPI**ï¼š
  ```javascript
  // å®¢æˆ·ç«¯æ¸²æŸ“
  ReactDOM.createRoot().render()  // React 18+ æ–°API
  ReactDOM.hydrateRoot()         // SSR æ³¨æ°´
  
  // æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆéœ€ä» react-dom/server å¯¼å…¥ï¼‰
  ReactDOMServer.renderToString()
  ReactDOMServer.renderToPipeableStream()  // React 18 æµå¼æ¸²æŸ“
  ```

#### æ¶æ„å…³ç³»å›¾ç¤º
```mermaid
graph LR
A[react] -->|æä¾›è™šæ‹ŸDOM| B[react-dom]
A -->|åŒæ„API| C[react-native]
B --> D[æµè§ˆå™¨DOM]
C --> E[åŸç”Ÿç§»åŠ¨ç«¯è§†å›¾]
```

#### ç‰ˆæœ¬æ¼”è¿›å·®å¼‚
| React ç‰ˆæœ¬ | å®¢æˆ·ç«¯æ¸²æŸ“ API          | æœåŠ¡ç«¯æ¸²æŸ“ API                    |
| ---------- | ----------------------- | --------------------------------- |
| **16.8-**  | `ReactDOM.render()`     | `ReactDOMServer.renderToString()` |
| **18+**    | `createRoot().render()` | `renderToPipeableStream()`        |

#### ä½¿ç”¨ç¤ºä¾‹å¯¹æ¯”
```javascript
// React 17 åŠä¹‹å‰
import React from 'react';
import ReactDOM from 'react-dom';
ReactDOM.render(<App />, document.getElementById('root'));

// React 18+
import { createRoot } from 'react-dom/client';
createRoot(document.getElementById('root')).render(<App />);
```

#### è®¾è®¡å“²å­¦
- **è·¨å¹³å°èƒ½åŠ›**ï¼š`react` æ ¸å¿ƒåŒ…ä¸ä¾èµ–å…·ä½“å¹³å°ï¼Œå¯ä¸ä¸åŒæ¸²æŸ“å™¨é…åˆ
  ```javascript
  // å…¶ä»–æ¸²æŸ“å™¨
  react-three-fiber   // 3D åœºæ™¯æ¸²æŸ“
  ink                // å‘½ä»¤è¡Œç•Œé¢æ¸²æŸ“
  ```
- **å…³æ³¨ç‚¹åˆ†ç¦»**ï¼šæ¸²æŸ“é€»è¾‘ä¸ç»„ä»¶é€»è¾‘è§£è€¦

> å®é™…å¼€å‘ä¸­ï¼Œ99% çš„åœºæ™¯åªéœ€åœ¨åº”ç”¨å…¥å£ä½¿ç”¨ `react-dom`ï¼Œå…¶ä½™ä»£ç éƒ½åº”åªä¾èµ– `react` åŒ…ã€‚è¿™ç§åˆ†ç¦»è®¾è®¡ä½¿å¾— React èƒ½åŒæ—¶æ”¯æŒ Webã€Native ç”šè‡³ CLI ç­‰ä¸åŒå¹³å°ã€‚

---

### 62. ä¸ºä»€ä¹ˆ React è¦å°† ReactDOM åˆ†ç¦»å‡ºæ¥ï¼Ÿ

React å›¢é˜Ÿå°† DOM ç›¸å…³åŠŸèƒ½æ‹†åˆ†åˆ°ç‹¬ç«‹åº“çš„æ ¸å¿ƒåŸå› å’Œæ·±è¿œå½±å“ï¼š

#### 1. æ ¸å¿ƒè®¾è®¡ç†å¿µ
- **è·¨å¹³å°æŠ½è±¡**ï¼šä¿æŒ `react` æ ¸å¿ƒåº“ä¸æ¸²æŸ“ç›®æ ‡è§£è€¦
- **å•ä¸€èŒè´£**ï¼š`react` åªå¤„ç†ç»„ä»¶é€»è¾‘ï¼Œ`react-dom` ä¸“æ³¨ DOM æ¸²æŸ“

#### 2. æŠ€æœ¯æ‹†åˆ†èƒŒæ™¯
```mermaid
timeline
    title React æ¶æ„æ¼”è¿›
    2015 (v0.14) : é¦–æ¬¡åˆ†ç¦» react å’Œ react-dom
    2016        : React Native ç¨³å®šç‰ˆå‘å¸ƒ
    2022 (v18)  : å¼•å…¥æ–°çš„ react-dom/client API
```

#### 3. å¤šæ¸²æŸ“å™¨æ”¯æŒ
| æ¸²æŸ“å™¨åŒ…            | ç›®æ ‡å¹³å°         | ç‰¹ç‚¹                        |
| ------------------- | ---------------- | --------------------------- |
| `react-dom`         | Web æµè§ˆå™¨       | å¤„ç† DOM å’Œæµè§ˆå™¨äº‹ä»¶       |
| `react-native`      | ç§»åŠ¨ç«¯åŸç”Ÿåº”ç”¨   | æ˜ å°„åˆ° iOS/Android åŸç”Ÿè§†å›¾ |
| `react-three-fiber` | Three.js 3D åœºæ™¯ | å£°æ˜å¼ 3D æ¸²æŸ“              |
| `ink`               | å‘½ä»¤è¡Œç•Œé¢       | ç»ˆç«¯æ–‡æœ¬å¸ƒå±€æ¸²æŸ“            |

#### 4. å®é™…å¼€å‘å½±å“
- **ä»£ç å…±äº«**ï¼šä¸šåŠ¡ç»„ä»¶å¯è·¨å¹³å°å¤ç”¨
  ```jsx
  // å…±äº«çš„é€»è¾‘ç»„ä»¶
  function Button({ text }) {
    return <Pressable>{text}</Pressable>;
  }
  // Web: ä½¿ç”¨ react-dom
  // Native: ä½¿ç”¨ react-native
  ```
- **æŒ‰éœ€åŠ è½½**ï¼šé Web é¡¹ç›®æ— éœ€å¼•å…¥ DOM ç›¸å…³ä»£ç 
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šå¯ç‹¬ç«‹æ›´æ–°æ¸²æŸ“å™¨ï¼ˆå¦‚ React 18 æ–°å¹¶å‘æ¸²æŸ“å™¨ï¼‰

#### 5. åˆ†ç¦»åçš„æ¶æ„ä¼˜åŠ¿
```mermaid
graph TD
    A[react] -->|è™šæ‹ŸDOM| B[react-dom]
    A -->|ç›¸åŒæ ¸å¿ƒ| C[react-native]
    A --> D[å…¶ä»–æ¸²æŸ“å™¨]
    B --> E[æµè§ˆå™¨]
    C --> F[ç§»åŠ¨è®¾å¤‡]
    D --> G[AR/VR/CLIç­‰]
```

#### å¼€å‘è€…æ³¨æ„äº‹é¡¹
1. Web é¡¹ç›®ä»éœ€å®‰è£…ä¸¤ä¸ªåŒ…ï¼š
   ```bash
   npm install react react-dom
   ```
2. æœåŠ¡ç«¯æ¸²æŸ“éœ€ä»ç‰¹å®šè·¯å¾„å¯¼å…¥ï¼š
   ```javascript
   import { renderToPipeableStream } from 'react-dom/server';
   ```
3. æµ‹è¯•æ—¶å¯ç”¨ `react-test-renderer` é¿å… DOM ä¾èµ–

> è¿™ç§åˆ†ç¦»è®¾è®¡ä½¿å¾— React æˆä¸ºçœŸæ­£çš„ã€Œå­¦ä¹ ä¸€æ¬¡ï¼Œéšå¤„ç¼–å†™ã€çš„æ¡†æ¶ã€‚æ®ç»Ÿè®¡ï¼Œè¶…è¿‡ 60% çš„ React æ ¸å¿ƒé€»è¾‘å¯åœ¨ä¸åŒå¹³å°é—´å…±äº«ï¼Œå¤§å¹…é™ä½äº†å¤šç«¯å¼€å‘æˆæœ¬ã€‚

---

### 63. å¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨ `<label>` å…ƒç´ ï¼Ÿ

åœ¨ JSX ä¸­æ­£ç¡®å…³è” label ä¸è¡¨å•æ§ä»¶çš„æ–¹æ³•å¦‚ä¸‹ï¼š

#### æ­£ç¡®ç”¨æ³•
```jsx
function LoginForm() {
  return (
    <div>
      {/* ä½¿ç”¨ htmlFor æ›¿ä»£ for å±æ€§ */}
      <label htmlFor="username">ç”¨æˆ·åï¼š</label>
      <input type="text" id="username" />

      {/* åŠ¨æ€ ID ç¤ºä¾‹ */}
      <label htmlFor={`password-${formId}`}>å¯†ç ï¼š</label>
      <input type="password" id={`password-${formId}`} />
    </div>
  );
}
```

#### é”™è¯¯ç¤ºä¾‹å¯¹æ¯”
```jsx
// âŒ é”™è¯¯å†™æ³•ï¼ˆæ§åˆ¶å°ä¼šæŠ¥è­¦å‘Šï¼‰
<label for="email">é‚®ç®±ï¼š</label>
<input type="email" id="email" />

// âœ… æ­£ç¡®å†™æ³•
<label htmlFor="email">é‚®ç®±ï¼š</label>
```

#### è®¾è®¡åŸå› 
1. **å…³é”®å­—å†²çª**ï¼š`for` æ˜¯ JavaScript å¾ªç¯å…³é”®å­—
2. **JSX è½¬æ¢è§„åˆ™**ï¼šå±æ€§åéœ€ä¸ DOM property ä¿æŒä¸€è‡´
   ```javascript
   // JSX ç¼–è¯‘ç»“æœ
   React.createElement('label', { htmlFor: 'user' }, 'User')
   ```

#### æ— éšœç¢è®¿é—®æœ€ä½³å®è·µ
1. **æ˜¾å¼å…³è”**ï¼ˆæ¨èï¼‰ï¼š
   ```jsx
   <label htmlFor="search">æœç´¢ï¼š</label>
   <input id="search" type="text" />
   ```
2. **éšå¼åŒ…è£¹**ï¼š
   ```jsx
   <label>
     è®°ä½æˆ‘ï¼š
     <input type="checkbox" />
   </label>
   ```

#### ç‰¹æ®Šåœºæ™¯å¤„ç†
- **è‡ªå®šä¹‰ç»„ä»¶**ï¼šéœ€è¦é€ä¼  htmlFor
  ```jsx
  function CustomInput({ id, label }) {
    return (
      <div>
        <label htmlFor={id}>{label}</label>
        <input id={id} type="text" />
      </div>
    );
  }
  ```

> æ ¹æ® W3C æ ‡å‡†ï¼Œæ­£ç¡®çš„ label å…³è”èƒ½æå‡è¡¨å•å¯ç”¨æ€§ï¼š  
> - ç‚¹å‡»æ ‡ç­¾è‡ªåŠ¨èšç„¦è¾“å…¥æ¡†  
> - æå‡å±å¹•é˜…è¯»å™¨ä½“éªŒ  
> - è§¦æ§è®¾å¤‡æ›´å®¹æ˜“æ“ä½œ

---

### 64. å¦‚ä½•åˆå¹¶å¤šä¸ªå†…è”æ ·å¼å¯¹è±¡ï¼Ÿ

åœ¨ React ä¸­æœ‰å¤šç§åˆå¹¶æ ·å¼çš„æ–¹å¼ï¼Œæ ¹æ®ä¸åŒåœºæ™¯é€‰æ‹©åˆé€‚æ–¹æ³•ï¼š

#### 1. å¯¹è±¡å±•å¼€ç¬¦ï¼ˆWeb æ¨èï¼‰
```jsx
function Button({ isPrimary }) {
  const baseStyle = {
    padding: '10px 20px',
    borderRadius: 4
  };

  const primaryStyle = {
    backgroundColor: 'blue',
    color: 'white'
  };

  return (
    <button style={{
      ...baseStyle,
      ...(isPrimary ? primaryStyle : null),
      fontSize: 16 // ç›´æ¥æ·»åŠ æ–°å±æ€§
    }}>
      æäº¤
    </button>
  );
}
```

#### 2. æ•°ç»„è¯­æ³•ï¼ˆReact Native ä¸“å±ï¼‰
```jsx
// ä»…é€‚ç”¨äº React Native
<View style={[
  styles.container,
  isActive && styles.activeStyle,
  { width: '100%' } // å†…è”å¯¹è±¡å¯æ··åˆä½¿ç”¨
]} />
```

#### 3. å¤æ‚åœºæ™¯å·¥å…·å‡½æ•°
```javascript
// é€šç”¨åˆå¹¶å·¥å…·ï¼ˆæ”¯æŒWebå’ŒNativeï¼‰
const mergeStyles = (...styles) => 
  styles.reduce((acc, style) => ({ ...acc, ...style }), {});

// ä½¿ç”¨ç¤ºä¾‹
<div style={mergeStyles(
  baseStyles,
  conditionalStyles,
  { color: 'red' }
)} />
```

#### æ ·å¼ä¼˜å…ˆçº§è§„åˆ™
| æ–¹æ³•           | è¦†ç›–é¡ºåº     | é€‚ç”¨å¹³å°     |
| -------------- | ------------ | ------------ |
| **å¯¹è±¡å±•å¼€ç¬¦** | åè€…è¦†ç›–å‰è€… | Web          |
| **æ•°ç»„è¯­æ³•**   | åè€…è¦†ç›–å‰è€… | React Native |
| **CSS-in-JS**  | ä¾èµ–åº“å®ç°   | æ‰€æœ‰         |

#### æœ€ä½³å®è·µå»ºè®®
1. **Web é¡¹ç›®**ï¼šä¼˜å…ˆä½¿ç”¨å±•å¼€ç¬¦
2. **React Native**ï¼šå¿…é¡»ä½¿ç”¨æ•°ç»„è¯­æ³•
3. **æ€§èƒ½ä¼˜åŒ–**ï¼šå¯¹é™æ€æ ·å¼ä½¿ç”¨ `useMemo`
   ```jsx
   const memoizedStyle = useMemo(() => ({
     ...baseStyle,
     ...dynamicStyle
   }), [dynamicStyle]);
   ```

> æ³¨æ„ï¼šåœ¨ Web ä¸­ï¼Œæ•°ç»„è¯­æ³•ä¼šå¯¼è‡´é”™è¯¯ã€‚React Native çš„ç‰¹æ®Šå®ç°æ˜¯å› ä¸ºå…¶æ ·å¼ç³»ç»ŸåŸºäº `StyleSheet.create()` çš„ä¼˜åŒ–æœºåˆ¶ã€‚

---

### 65. å¦‚ä½•å®ç°æµè§ˆå™¨çª—å£å¤§å°å˜åŒ–æ—¶é‡æ–°æ¸²æŸ“è§†å›¾ï¼Ÿ

ä»¥ä¸‹æ˜¯å“åº”æµè§ˆå™¨çª—å£å°ºå¯¸å˜åŒ–çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼š

#### å‡½æ•°ç»„ä»¶å®ç°ï¼ˆæ¨èï¼‰
```jsx
import { useState, useEffect } from 'react';

function useWindowDimensions() {
  const [dimensions, setDimensions] = useState({
    width: window.innerWidth,
    height: window.innerHeight
  });

  useEffect(() => {
    const handleResize = () => {
      setDimensions({
        width: window.innerWidth,
        height: window.innerHeight
      });
    };

    // æ·»åŠ äº‹ä»¶ç›‘å¬
    window.addEventListener('resize', handleResize);
    
    // æ¸…é™¤å‰¯ä½œç”¨
    return () => window.removeEventListener('resize', handleResize);
  }, []); // ç©ºä¾èµ–æ•°ç»„ç¡®ä¿åªè¿è¡Œä¸€æ¬¡

  return dimensions;
}

// ä½¿ç”¨ç¤ºä¾‹
function ResponsiveComponent() {
  const { width, height } = useWindowDimensions();
  
  return (
    <div>
      å½“å‰çª—å£å°ºå¯¸ï¼š{width}px Ã— {height}px
      {width < 768 && <MobileView />}
    </div>
  );
}
```

#### æ€§èƒ½ä¼˜åŒ–å»ºè®®
1. **é˜²æŠ–å¤„ç†**ï¼ˆé¿å…é¢‘ç¹æ›´æ–°ï¼‰
   ```javascript
   useEffect(() => {
     const debouncedHandleResize = _.debounce(() => {
       // æ›´æ–°é€»è¾‘
     }, 100);
   
     window.addEventListener('resize', debouncedHandleResize);
     return () => window.removeEventListener('resize', debouncedHandleResize);
   }, []);
   ```

2. **è‡ªå®šä¹‰ Hook å¤ç”¨**
   ```javascript
   // æå–ä¸ºå¯å¤ç”¨çš„Hook
   export function useWindowSize(delay = 100) {
     const [size, setSize] = useState(getSize());
     
     useEffect(() => {
       const handler = _.debounce(() => setSize(getSize()), delay);
       window.addEventListener('resize', handler);
       return () => window.removeEventListener('resize', handler);
     }, [delay]);
   
     return size;
   }
   
   function getSize() {
     return {
       width: window.innerWidth,
       height: window.innerHeight
     };
   }
   ```

3. **SSR å…¼å®¹å¤„ç†**
   ```javascript
   const [dimensions, setDimensions] = useState(
     typeof window !== 'undefined' 
       ? { width: window.innerWidth, height: window.innerHeight }
       : { width: 0, height: 0 }
   );
   ```

> å…³é”®ç‚¹ï¼šåŠ¡å¿…åœ¨ç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬ï¼ˆ`useEffect` çš„æ¸…ç†å‡½æ•°æˆ– `componentWillUnmount`ï¼‰ï¼Œå¦åˆ™ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚ç°ä»£æµè§ˆå™¨é€šå¸¸æ¯ç§’è§¦å‘ 10-30 æ¬¡ resize äº‹ä»¶ï¼Œå»ºè®®å¯¹æ˜‚è´µæ“ä½œè¿›è¡Œé˜²æŠ–å¤„ç†ã€‚

---

### 66. å¦‚ä½•åœ¨ React ä¸­ç¾åŒ–æ‰“å° JSON æ•°æ®ï¼Ÿ

ä»¥ä¸‹æ˜¯å‡ ç§åœ¨ React ä¸­æ ¼å¼åŒ–æ˜¾ç¤º JSON æ•°æ®çš„æ–¹æ³•ï¼š

#### 1. åŸºç¡€æ–¹æ¡ˆï¼ˆä½¿ç”¨ `pre` æ ‡ç­¾ï¼‰
```jsx
function JsonViewer({ data }) {
  return (
    <pre className="json-viewer">
      {JSON.stringify(data, null, 2)}
    </pre>
  );
}

// ä½¿ç”¨ç¤ºä¾‹
<JsonViewer data={{ name: "å¼ ä¸‰", age: 28, skills: ["React", "TypeScript"] }} />
```

#### 2. è¯­æ³•é«˜äº®è¿›é˜¶ç‰ˆ
```jsx
import SyntaxHighlighter from 'react-syntax-highlighter';
import { atomOneDark } from 'react-syntax-highlighter/dist/esm/styles/hljs';

function PrettyJson({ data }) {
  return (
    <SyntaxHighlighter 
      language="json" 
      style={atomOneDark}
      showLineNumbers
    >
      {JSON.stringify(data, null, 2)}
    </SyntaxHighlighter>
  );
}
```

#### 4. è‡ªå®šä¹‰æ ¼å¼åŒ– Hook
```jsx
function usePrettyJson(data) {
  return useMemo(() => JSON.stringify(data, null, 2), [data]);
}

// ä½¿ç”¨æ–¹å¼
function UserProfile({ user }) {
  const formattedJson = usePrettyJson(user);
  return <pre>{formattedJson}</pre>;
}
```

#### æ ·å¼ä¼˜åŒ–å»ºè®®
```css
/* æ·»åŠ CSSå¢å¼ºå¯è¯»æ€§ */
.json-viewer {
  background: #282c34;
  color: #abb2bf;
  padding: 16px;
  border-radius: 8px;
  overflow: auto;
  max-height: 400px;
}
```

#### æ³¨æ„äº‹é¡¹
- `JSON.stringify` å‚æ•°è¯´æ˜ï¼š
  - ç¬¬2ä¸ªå‚æ•° `null` è¡¨ç¤ºä¸è¿‡æ»¤å±æ€§
  - ç¬¬3ä¸ªå‚æ•° `2` è¡¨ç¤ºç¼©è¿›2ä¸ªç©ºæ ¼
- å¯¹äºå¾ªç¯å¼•ç”¨çš„å¯¹è±¡ï¼Œéœ€è¦å…ˆå¤„ç†ï¼š
  ```js
  import { stableStringify } from 'fast-json-stable-stringify';
  stableStringify(circularData);
  ```

> å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œæ¨èä½¿ç”¨ä¸“ä¸šç»„ä»¶å¦‚ `react-json-view`ï¼Œå®ƒæä¾›å¯æŠ˜å ã€ä¸»é¢˜åŒ–ç­‰é«˜çº§åŠŸèƒ½ï¼š
> ```jsx
> import ReactJson from 'react-json-view';
> <ReactJson src={data} theme="monokai" collapsed={1} />
> ```

---

### 67. ä¸ºä»€ä¹ˆåœ¨ React ä¸­ä¸èƒ½ç›´æ¥ä¿®æ”¹ propsï¼Ÿ

React å¼ºåˆ¶ä¿æŒ props çš„ä¸å¯å˜æ€§ï¼ˆimmutabilityï¼‰ï¼Œè¿™æ˜¯å…¶æ ¸å¿ƒè®¾è®¡åŸåˆ™ä¹‹ä¸€ï¼Œä¸»è¦åŸå› åŒ…æ‹¬ï¼š

#### 1. å•å‘æ•°æ®æµè®¾è®¡
```mermaid
graph TD
    A[çˆ¶ç»„ä»¶] -->|ä¼ é€’props| B[å­ç»„ä»¶]
    B -->|äº‹ä»¶å›è°ƒ| A
```
- **è‡ªä¸Šè€Œä¸‹**ï¼šæ•°æ®åªèƒ½ä»çˆ¶ç»„ä»¶æµå‘å­ç»„ä»¶
- **é€†å‘é€šä¿¡**ï¼šå­ç»„ä»¶é€šè¿‡è°ƒç”¨çˆ¶ç»„ä»¶ä¼ é€’çš„å›è°ƒå‡½æ•°é—´æ¥"ä¿®æ”¹"æ•°æ®

#### 2. ä¸å¯å˜æ€§çš„ä¼˜åŠ¿
| ç‰¹æ€§             | è¯´æ˜                                              |
| ---------------- | ------------------------------------------------- |
| **å¯é¢„æµ‹æ€§**     | ç»™å®šç›¸åŒçš„ propsï¼Œç»„ä»¶æ€»æ˜¯æ¸²æŸ“ç›¸åŒè¾“å‡º            |
| **æ€§èƒ½ä¼˜åŒ–**     | æµ…æ¯”è¾ƒï¼ˆshallow compareï¼‰å¯å¿«é€Ÿåˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ¸²æŸ“ |
| **è°ƒè¯•å‹å¥½**     | æ•°æ®å˜åŒ–å†å²æ¸…æ™°ï¼Œä¾¿äºè¿½è¸ªé—®é¢˜                    |
| **å¹¶å‘æ¨¡å¼å®‰å…¨** | é¿å…å¼‚æ­¥æ¸²æŸ“è¿‡ç¨‹ä¸­çš„æ•°æ®ç«äº‰é—®é¢˜                  |

#### 3. æ­£ç¡®"ä¿®æ”¹"æ–¹å¼ç¤ºä¾‹
```jsx
// çˆ¶ç»„ä»¶
function Parent() {
  const [count, setCount] = useState(0);

  // é€šè¿‡å›è°ƒå‡½æ•°æ›´æ–°
  const handleUpdate = () => setCount(c => c + 1);

  return <Child count={count} onUpdate={handleUpdate} />;
}

// å­ç»„ä»¶
function Child({ count, onUpdate }) {
  return (
    <div>
      <p>è®¡æ•°: {count}</p>
      <button onClick={onUpdate}>å¢åŠ </button>
    </div>
  );
}
```

#### 4. ç‰¹æ®Šåœºæ™¯å¤„ç†
- **çŠ¶æ€æå‡**ï¼šå½“å¤šä¸ªç»„ä»¶éœ€è¦å…±äº«çŠ¶æ€æ—¶
  ```jsx
  function Form() {
    const [value, setValue] = useState('');
    return (
      <>
        <Input value={value} onChange={setValue} />
        <Preview value={value} />
      </>
    );
  }
  ```
- **çŠ¶æ€ç®¡ç†åº“**ï¼šRedux/MobX ç­‰æä¾›å¯é¢„æµ‹çš„çŠ¶æ€æ›´æ–°æœºåˆ¶

#### åº•å±‚åŸç†
React ä¼šåœ¨å¼€å‘æ¨¡å¼ä¸‹å†»ç»“ `props` å¯¹è±¡ï¼š
```javascript
Object.freeze(props); // å°è¯•ä¿®æ”¹ä¼šæŠ›å‡ºé”™è¯¯
```

> è¿™ä¸ªè®¾è®¡ä½¿ React åº”ç”¨æ›´å®¹æ˜“ç»´æŠ¤ï¼Œæ ¹æ® GitHub ç»Ÿè®¡ï¼Œéµå®ˆä¸å¯å˜åŸåˆ™çš„ React é¡¹ç›®æ¯”å¯å˜æ•°æ®é¡¹ç›®å‡å°‘çº¦ 40% çš„çŠ¶æ€ç›¸å…³ bugã€‚å¯¹äºå¤æ‚çŠ¶æ€é€»è¾‘ï¼Œæ¨èä½¿ç”¨ `useReducer` æ›¿ä»£ç›´æ¥çŠ¶æ€ä¿®æ”¹ã€‚

---

### 68. å¦‚ä½•åœ¨é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨èšç„¦è¾“å…¥æ¡†ï¼Ÿ

åœ¨ React ä¸­å®ç°è¾“å…¥æ¡†è‡ªåŠ¨èšç„¦çš„å‡ ç§æ ‡å‡†æ–¹æ³•ï¼š

#### 1. å‡½æ•°ç»„ä»¶å®ç°ï¼ˆæ¨èï¼‰
```jsx
import { useEffect, useRef } from 'react';

function LoginForm() {
  const emailInputRef = useRef(null);

  // ç»„ä»¶æŒ‚è½½åæ‰§è¡Œèšç„¦
  useEffect(() => {
    emailInputRef.current?.focus();
  }, []); // ç©ºä¾èµ–æ•°ç»„ç¡®ä¿åªåœ¨æŒ‚è½½æ—¶è¿è¡Œä¸€æ¬¡

  return (
    <form>
      <input 
        ref={emailInputRef}
        type="email" 
        placeholder="é‚®ç®±"
      />
      <input
        type="password"
        placeholder="å¯†ç "
      />
    </form>
  );
}
```

#### 3. è‡ªå®šä¹‰ Hook å°è£…
```jsx
function useAutoFocus() {
  const ref = useRef(null);
  useEffect(() => {
    ref.current?.focus();
  }, []);
  return ref;
}

// ä½¿ç”¨ç¤ºä¾‹
function CommentForm() {
  const commentRef = useAutoFocus();
  return <textarea ref={commentRef} />;
}
```

#### æ³¨æ„äº‹é¡¹
1. **æ¡ä»¶èšç„¦**ï¼šæ ¹æ® props/state å†³å®šæ˜¯å¦èšç„¦
   ```jsx
   useEffect(() => {
     if (shouldFocus) {
       inputRef.current.focus();
     }
   }, [shouldFocus]);
   ```
2. **è¡¨å•éªŒè¯**ï¼šé…åˆé”™è¯¯çŠ¶æ€è‡ªåŠ¨èšç„¦åˆ°é—®é¢˜å­—æ®µ
   ```jsx
   useEffect(() => {
     if (errors.username) {
       usernameRef.current.focus();
     }
   }, [errors]);
   ```
3. **æ— éšœç¢è®¿é—®**ï¼šæ·»åŠ è§†è§‰æç¤ºé¿å…çº¯èšç„¦ä¾èµ–
   ```jsx
   <input
     ref={inputRef}
     aria-label="é¦–è¦è¾“å…¥æ¡†ï¼Œå·²è‡ªåŠ¨èšç„¦"
   />
   ```

#### ä¸ºä»€ä¹ˆéœ€è¦ useRefï¼Ÿ
- ç›´æ¥æ“ä½œ DOM æ˜¯ React çš„é€ƒç”Ÿèˆ±å£ï¼ˆescape hatchï¼‰
- é¿å…ä½¿ç”¨ `document.querySelector` ç­‰å‘½ä»¤å¼æ–¹æ³•
- ä¸ React çš„å£°æ˜å¼èŒƒå¼å…¼å®¹

> åœ¨ React 18+ çš„ä¸¥æ ¼æ¨¡å¼ï¼ˆStrict Modeï¼‰ä¸‹ï¼Œå¼€å‘ç¯å¢ƒä¼šæ•…æ„æ‰§è¡Œä¸¤æ¬¡ useEffect æ¥æ£€æµ‹å‰¯ä½œç”¨é—®é¢˜ï¼Œä½†ç”Ÿäº§ç¯å¢ƒåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œä¸å½±å“èšç„¦åŠŸèƒ½ã€‚

---

### 69. å¦‚ä½•åœ¨æµè§ˆå™¨è¿è¡Œæ—¶è·å– React ç‰ˆæœ¬ä¿¡æ¯ï¼Ÿ

å¯ä»¥é€šè¿‡ `React.version` å±æ€§åŠ¨æ€è·å–å½“å‰ä½¿ç”¨çš„ React ç‰ˆæœ¬ï¼Œä»¥ä¸‹æ˜¯å…·ä½“æ–¹æ³•å’Œåº”ç”¨åœºæ™¯ï¼š

#### 1. åŸºç¡€ç”¨æ³•
```jsx
function VersionInfo() {
  return (
    <div className="version-badge">
      å½“å‰Reactç‰ˆæœ¬: v{React.version}
    </div>
  );
}

// æ¸²æŸ“åˆ°é¡µè„šç­‰ä½ç½®
ReactDOM.createRoot(document.getElementById('footer'))
  .render(<VersionInfo />);
```

#### 2. å¼€å‘è°ƒè¯•æŠ€å·§
```javascript
// ç›´æ¥åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹
console.log('Reactç‰ˆæœ¬:', React.version);

// é…åˆæ¡ä»¶é€»è¾‘
if (parseFloat(React.version) < 18) {
  console.warn('å»ºè®®å‡çº§åˆ°React 18+ç‰ˆæœ¬');
}
```

#### 3. ç‰ˆæœ¬æ¯”è¾ƒæ–¹æ¡ˆ
```jsx
import { version } from 'react';

function VersionGuard({ minVersion }) {
  const isSupported = parseFloat(version) >= parseFloat(minVersion);
  
  return isSupported ? (
    <App />
  ) : (
    <div className="upgrade-alert">
      éœ€è¦React {minVersion}+ ç‰ˆæœ¬ï¼ˆå½“å‰v{version}ï¼‰
    </div>
  );
}
```

#### 4. ç”Ÿäº§ç¯å¢ƒæ³¨æ„äº‹é¡¹
- **å®‰å…¨æç¤º**ï¼šé¿å…åœ¨å‰ç«¯æš´éœ²å…·ä½“ç‰ˆæœ¬å·ï¼ˆå¯é€šè¿‡æ„å»ºæ—¶æ›¿æ¢ï¼‰
  ```javascript
  process.env.REACT_APP_VERSION = React.version;
  ```
- **SSR å…¼å®¹**ï¼šæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ç‰ˆæœ¬éœ€ä¸€è‡´

#### ç‰ˆæœ¬å·æ ¼å¼è¯´æ˜
React éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼ˆSemVerï¼‰ï¼š
```
ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·
â†“ â†“ â†“
18 . 2 . 0
```
- **ä¸»ç‰ˆæœ¬**ï¼šé‡å¤§æ›´æ–°ï¼ˆå¦‚ React 18 å¼•å…¥å¹¶å‘æ¸²æŸ“ï¼‰
- **æ¬¡ç‰ˆæœ¬**ï¼šå‘åå…¼å®¹çš„åŠŸèƒ½æ–°å¢
- **ä¿®è®¢å·**ï¼šé—®é¢˜ä¿®å¤

> è¯¥ç‰¹æ€§ä¸»è¦ç”¨äºå¼€å‘è°ƒè¯•å’Œå…¼å®¹æ€§æ£€æŸ¥ï¼Œå®é™…é¡¹ç›®ä¸­å»ºè®®é€šè¿‡ `package.json` ç®¡ç†ä¾èµ–ç‰ˆæœ¬ã€‚æ®ç»Ÿè®¡ï¼ŒReact 16+ ç‰ˆæœ¬è¦†ç›–ç‡å·²è¾¾ 98% ä»¥ä¸Šï¼Œé€šå¸¸ä¸éœ€è¦åšè¿‡å¤šç‰ˆæœ¬é€‚é…é€»è¾‘ã€‚

---

### 70. å¦‚ä½•ä¸º React Router æ·»åŠ  Google Analytics è·Ÿè¸ªï¼Ÿ

ä»¥ä¸‹æ˜¯é›†æˆ Google Analytics ä¸ React Router çš„å®Œæ•´æ–¹æ¡ˆï¼š

#### 1. åŸºç¡€å®ç°ï¼ˆReact Router v5/v6ï¼‰
```jsx
import { useEffect } from 'react';
import { useLocation } from 'react-router-dom';

function GoogleAnalyticsTracker() {
  const location = useLocation();

  useEffect(() => {
    // ç¡®ä¿GAå·²åŠ è½½
    if (typeof window.gtag === 'function') {
      gtag('config', 'GA_MEASUREMENT_ID', {
        page_path: location.pathname + location.search,
      });
    }
  }, [location]); // è·¯ç”±å˜åŒ–æ—¶è§¦å‘

  return null;
}

// åœ¨æ ¹ç»„ä»¶ä¸­ä½¿ç”¨
function App() {
  return (
    <Router>
      <GoogleAnalyticsTracker />
      {/* å…¶ä»–è·¯ç”± */}
    </Router>
  );
}
```

#### 2. å†å²ç‰ˆæœ¬å…¼å®¹ï¼ˆReact Router v4ï¼‰
```javascript
import { createBrowserHistory } from 'history';

const history = createBrowserHistory();

history.listen((location) => {
  window.ga('set', 'page', location.pathname);
  window.ga('send', 'pageview');
});

// ä½¿ç”¨æ—¶
<Router history={history}>
  {/* è·¯ç”±é…ç½® */}
</Router>
```

#### 3. ç°ä»£ gtag.js æ–¹æ¡ˆï¼ˆæ¨èï¼‰
```javascript
// åœ¨index.htmlæ·»åŠ å…¨å±€è„šæœ¬
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'GA_MEASUREMENT_ID');
</script>

// React ç»„ä»¶ä¸­
useEffect(() => {
  gtag('event', 'page_view', {
    page_title: document.title,
    page_path: location.pathname,
  });
}, [location]);
```

#### 4. é«˜çº§é…ç½®
```javascript
// è‡ªå®šä¹‰äº‹ä»¶è·Ÿè¸ª
const trackEvent = (action, category, label) => {
  gtag('event', action, {
    event_category: category,
    event_label: label,
  });
};

// åœ¨æŒ‰é’®ç‚¹å‡»ç­‰äº¤äº’ä¸­ä½¿ç”¨
<button onClick={() => trackEvent('click', 'Download', 'PDF')}>
  ä¸‹è½½PDF
</button>
```

#### æ³¨æ„äº‹é¡¹
1. **å¼€å‘ç¯å¢ƒè¿‡æ»¤**ï¼š
   ```javascript
   if (process.env.NODE_ENV === 'production') {
     // GAä»£ç 
   }
   ```
2. **GDPRåˆè§„**ï¼šæ·»åŠ ç”¨æˆ·åŒæ„æœºåˆ¶
3. **SPAç‰¹æ€§**ï¼šç¡®ä¿è·Ÿè¸ªå•é¡µåº”ç”¨çš„è™šæ‹Ÿé¡µé¢æµè§ˆ
4. **è·¯ç”±åˆ‡æ¢å»¶è¿Ÿ**ï¼šå¯¹äºå¼‚æ­¥åŠ è½½çš„å†…å®¹ï¼Œå¯æ·»åŠ å»¶è¿Ÿè·Ÿè¸ª

> å»ºè®®ä½¿ç”¨æœ€æ–°çš„[Google Analytics 4 (GA4)](https://developers.google.com/analytics/devguides/collection/ga4) è€Œä¸æ˜¯ä¼ ç»Ÿ Universal Analyticsã€‚æ®ç»Ÿè®¡ï¼Œæ­£ç¡®é…ç½®çš„SPAè·Ÿè¸ªå¯å°†è½¬åŒ–åˆ†æå‡†ç¡®ç‡æå‡60%ä»¥ä¸Šã€‚

---

### 75. React é¡¹ç›®å¸¸è§çš„æ–‡ä»¶å¤¹ç»“æ„æ–¹æ¡ˆ

åœ¨ React ç”Ÿæ€ä¸­ï¼Œä¸»è¦æœ‰ä¸¤ç§ä¸»æµçš„é¡¹ç›®ç»„ç»‡ç»“æ„ï¼Œå„æœ‰é€‚ç”¨åœºæ™¯ï¼š

#### 1. æŒ‰åŠŸèƒ½/è·¯ç”±åˆ’åˆ†ï¼ˆæ¨èä¸­å‹ä»¥ä¸Šé¡¹ç›®ï¼‰
```
src/
â”œâ”€â”€ features/           # åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ auth/           # è®¤è¯æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ AuthForm.jsx
â”‚   â”‚   â”œâ”€â”€ authAPI.js   # ç›¸å…³API
â”‚   â”‚   â”œâ”€â”€ authSlice.js # Reduxé€»è¾‘
â”‚   â”‚   â””â”€â”€ styles.module.css
â”‚   â””â”€â”€ dashboard/      # ä»ªè¡¨ç›˜æ¨¡å—
â”‚       â”œâ”€â”€ components/  # å­ç»„ä»¶
â”‚       â”œâ”€â”€ hooks/       # è‡ªå®šä¹‰Hook
â”‚       â””â”€â”€ utils/       # å·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ shared/             # å…¬å…±èµ„æº
â”‚   â”œâ”€â”€ components/     # é€šç”¨ç»„ä»¶ï¼ˆButton/Modalç­‰ï¼‰
â”‚   â”œâ”€â”€ hooks/          # å…¨å±€Hook
â”‚   â””â”€â”€ utils/          # å…¬å…±å·¥å…·
â”‚
â””â”€â”€ app/                # åº”ç”¨æ ¹é…ç½®
    â”œâ”€â”€ store.js        # Redux store
    â””â”€â”€ router.js       # è·¯ç”±é…ç½®
```
**ä¼˜åŠ¿**ï¼š
- é«˜å†…èšä½è€¦åˆï¼Œä¾¿äºåŠŸèƒ½æ¨¡å—æ•´ä½“è¿ç§»
- é€‚åˆä½¿ç”¨ Redux Toolkit çš„ feature-sliced è®¾è®¡
- å¾®å‰ç«¯æ¶æ„å‹å¥½

#### 2. æŒ‰æ–‡ä»¶ç±»å‹åˆ’åˆ†ï¼ˆé€‚åˆå°å‹é¡¹ç›®ï¼‰
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â”œâ”€â”€ Button.jsx
â”‚   â”‚   â”œâ”€â”€ Button.test.js
â”‚   â”‚   â””â”€â”€ styles.css
â”‚   â””â”€â”€ Modal/
â”‚       â”œâ”€â”€ Modal.jsx
â”‚       â””â”€â”€ Modal.css
â”‚
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ Home.jsx        # é¡µé¢ç»„ä»¶
â”‚   â””â”€â”€ Profile.jsx
â”‚
â”œâ”€â”€ services/          # APIè°ƒç”¨
â”œâ”€â”€ store/             # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â””â”€â”€ hooks/             # è‡ªå®šä¹‰Hook
```
**ç‰¹ç‚¹**ï¼š
- æ–°æ‰‹å‹å¥½ï¼Œå­¦ä¹ æˆæœ¬ä½
- é€‚åˆ CRUD ç±»ç®€å•åº”ç”¨
- å®¹æ˜“äº§ç”Ÿ"ä¸Šå¸ç»„ä»¶"

#### ç°ä»£æ··åˆç»“æ„ï¼ˆæ¨èï¼‰
ç»“åˆä¸¤ç§ä¼˜ç‚¹çš„æ¼”è¿›æ–¹æ¡ˆï¼š
```
src/
â”œâ”€â”€ app/               # åº”ç”¨æ ¸å¿ƒé…ç½®
â”œâ”€â”€ processes/         # å¤æ‚ä¸šåŠ¡æµç¨‹
â”œâ”€â”€ pages/             # è·¯ç”±å…¥å£é¡µé¢
â”œâ”€â”€ widgets/           # å¯å¤ç”¨ä¸šåŠ¡ç»„ä»¶
â”œâ”€â”€ features/          # åŠŸèƒ½æ¨¡å—
â”œâ”€â”€ shared/            # é€šç”¨åŸºç¡€è®¾æ–½
â””â”€â”€ entities/          # ä¸šåŠ¡å®ä½“æ¨¡å‹
```

#### é€‰æ‹©å»ºè®®
- **å›¢é˜Ÿåä½œ**ï¼šé‡‡ç”¨ feature-based ç»“æ„ï¼Œæ¯ä¸ªæ¨¡å—ç‹¬ç«‹è´Ÿè´£
- **TypeScript é¡¹ç›®**ï¼šå¢åŠ  `types/` æ–‡ä»¶å¤¹é›†ä¸­ç®¡ç†ç±»å‹å®šä¹‰
- **Next.js é¡¹ç›®**ï¼šéµå¾ªå…¶çº¦å®šçš„ `pages/` è·¯ç”±ç»“æ„
- **Monorepo**ï¼šç»“åˆ `packages/` ç›®å½•ç®¡ç†å¤šé¡¹ç›®

> æ ¹æ® 2023 å¹´ React å¼€å‘è€…è°ƒæŸ¥ï¼Œ78% çš„ä¸­å¤§å‹é¡¹ç›®å·²è½¬å‘åŠŸèƒ½æ¨¡å—åŒ–ç»“æ„ã€‚å»ºè®®ä»ç®€å•ç»“æ„å¼€å§‹ï¼Œéšç€é¡¹ç›®å¤æ‚åº¦å¢é•¿é€æ­¥æ¼”è¿›ã€‚å…³é”®åŸåˆ™æ˜¯ä¿æŒæ–‡ä»¶å¤¹çš„å•ä¸€èŒè´£å’Œå¯¼å…¥è·¯å¾„æ¸…æ™°ã€‚

---

