计算机面试中关于**计算机网络**的问题是非常常见的，尤其是前端、后端、全栈、运维、安全、以及系统设计类岗位。以下是一些高频问题，按照不同类别进行了整理，并附带简要解释。

------

## 🔹 一、基础概念类

1. **OSI七层模型和TCP/IP四层模型分别是什么？各层作用是什么？**
   * 重点掌握每层的名称、功能、对应协议（如HTTP属于应用层，TCP属于传输层等）。
2. **TCP和UDP的区别？**
   * 是否连接、是否可靠、是否有顺序、是否拥塞控制、传输效率等方面。
3. **三次握手和四次挥手过程详解？为什么需要三次握手？**
   * 面试高频题，建议图示+过程+特殊情况（如SYN攻击）。
4. **什么是端口？常见的端口有哪些？**
   * 如：80（HTTP）、443（HTTPS）、22（SSH）、3306（MySQL）等。
5. **IP地址、子网掩码、网关的含义？**

------

## 🔹 二、协议相关

1. **HTTP 和 HTTPS 的区别？**
   * 加密、端口、证书、性能等方面。
2. **HTTP1.0 / 1.1 / 2.0 / 3.0 的区别？**
   * 如：持久连接、管道化、头部压缩、多路复用、基于TCP/QUIC等。
3. **HTTP 状态码含义？常见的有哪些？**
   * 如：200、301、302、400、403、404、500、502 等。
4. **什么是长连接与短连接？举例说明？**
   * WebSocket 是典型的长连接应用。
5. **Cookie、Session 和 Token 的区别？**
6. **DNS 的工作过程？如何从域名解析到IP地址？**

* 浏览器缓存 → 系统缓存 → 本地hosts → DNS服务器 等流程。

------

## 🔹 三、TCP 深入理解

1. **滑动窗口机制是什么？拥塞控制怎么做的？**

* 包括慢启动、拥塞避免、快速重传和快速恢复等。

1. **TCP为什么可靠？如何保证可靠性？**

* 序列号、确认应答（ACK）、重传机制、校验和等。

1. **TCP 的流量控制和拥塞控制的区别？**
2. **为什么TIME_WAIT状态要等2MSL？有什么作用？**

------

## 🔹 四、网络通信与性能优化

1. **CDN是什么？工作原理？**
2. **负载均衡的几种策略？如Nginx如何实现？**
3. **常见的网络攻击有哪些？如何防御？**

* DDoS、ARP欺骗、DNS劫持、CSRF、XSS 等。

1. **跨域是什么？如何解决？**

* CORS、JSONP、代理、iframe + postMessage 等。

1. **WebSocket 和 HTTP 的区别？适用场景？**

------

## 🔹 五、现代网络协议与技术

1. **QUIC 协议的优势？**
2. **TLS/SSL 的握手过程？如何加密通信？**
3. **IPv4 和 IPv6 的区别？**
4. **什么是NAT？如何实现内网穿透？**

------

## 🔹 六、实践类/系统设计类

1. **如何设计一个高并发的聊天系统？**
2. **一次完整的从浏览器输入 URL 到页面显示的过程？**
3. **如果用户上传了一个很大的文件，你如何设计后端处理过程？**
4. **你如何优化一个请求响应变慢的 Web 服务？**
5. **如果你的 API 遇到请求超时，如何排查和解决？**

------

## 🔹 七、前端/后端角度常问

### 前端面试常问网络问题：

* Fetch 和 XMLHttpRequest 区别？
* 跨域问题与 CORS 配置？
* 浏览器缓存策略（强缓存 vs 协商缓存）？

### 后端面试常问网络问题：

* HTTP 长轮询、短轮询、WebSocket 设计？
* TCP 粘包与拆包怎么处理？
* 后端如何做限流、熔断、降级？

------

如果你需要我**逐题讲解答案**、**整理中英文对照表格**或**结合你具体岗位补充特定题型（比如 Golang 后端）**，也可以告诉我，我可以继续扩展补充。

下面我将逐题为你详细讲解计算机网络面试常见问题及其答案，分为七大类：

------

## 🔹 一、基础概念类

### 1. **OSI七层模型和TCP/IP四层模型的区别及作用？**

* **OSI七层模型：**
  1. 应用层：提供应用程序网络服务（如HTTP、FTP）。
  2. 表示层：数据格式转换、加解密（如SSL/TLS）。
  3. 会话层：建立、管理和终止会话（如RPC）。
  4. 传输层：提供端到端传输（如TCP/UDP）。
  5. 网络层：选择路由，实现IP寻址（如IP协议）。
  6. 数据链路层：数据帧的传输（如MAC、ARP）。
  7. 物理层：比特流传输（如光纤、电缆、网卡）。
* **TCP/IP四层模型（实际更常用）：**
  1. 应用层（对应OSI的应用/表示/会话）
  2. 传输层（TCP/UDP）
  3. 网络层（IP）
  4. 网络接口层（数据链路 + 物理层）

📝**面试要点**：了解层次划分意义，知道常见协议归属哪一层，能画图表示。

------

### 2. **TCP 和 UDP 的区别？**

| 项目           | TCP                      | UDP                   |
| -------------- | ------------------------ | --------------------- |
| 是否连接       | 面向连接（三次握手）     | 无连接                |
| 可靠性         | 可靠，顺序到达，重传机制 | 不可靠，可能丢包/乱序 |
| 速度           | 较慢                     | 快                    |
| 是否有拥塞控制 | 有                       | 无                    |
| 应用场景       | 文件传输、网页、邮件     | 视频、直播、DNS、游戏 |

📝**面试要点**：能说出 TCP 为何可靠；UDP 为何更快；对应实际场景。

------

### 3. **三次握手和四次挥手过程详解**

#### 三次握手（连接建立）：

1. **客户端**发送 SYN（SYN=1，seq=x）
2. **服务器**回复 SYN+ACK（SYN=1，ACK=1，seq=y，ack=x+1）
3. **客户端**发送 ACK（ACK=1，seq=x+1，ack=y+1）

> 为什么需要三次？防止旧连接请求重传造成误连接。

#### 四次挥手（连接断开）：

1. **客户端**发送 FIN（表示不再发送数据）
2. **服务器**回复 ACK（确认）
3. **服务器**发送 FIN（也准备关闭）
4. **客户端**回复 ACK（确认）

> 为什么要四次？因为关闭连接是双向的，双方都需要单独关闭自己的发送能力。

📝**面试要点**：能画图说明，理解 TIME_WAIT 的必要性（防止延迟包干扰新连接）。

------

### 4. **端口的概念？常见端口？**

* **端口**是用于标识主机上具体进程的数字编号（0-65535）
* 常见端口：
  * 80：HTTP
  * 443：HTTPS
  * 22：SSH
  * 21：FTP
  * 3306：MySQL

📝**面试要点**：了解端口范围（0-1023 为系统端口），知道服务对应端口。

------

### 5. **IP地址、子网掩码、网关的作用？**

* **IP地址**：设备在网络中的唯一标识（如 192.168.0.1）
* **子网掩码**：决定网络位和主机位的划分（如 255.255.255.0）
* **默认网关**：用于连接外部网络的设备（如路由器）

📝**面试要点**：知道如何判断两个IP是否在同一网段。

------

好的，继续为你逐题讲解：

------

## 🔹 二、协议相关

### 6. **HTTP 和 HTTPS 的区别？**

| 项目     | HTTP                        | HTTPS                              |
| -------- | --------------------------- | ---------------------------------- |
| 全称     | HyperText Transfer Protocol | HyperText Transfer Protocol Secure |
| 端口     | 默认 80                     | 默认 443                           |
| 安全性   | 不加密，明文传输            | 加密传输，防窃听/篡改              |
| 使用协议 | 基于 TCP                    | 基于 TLS + TCP                     |
| 证书要求 | 不需要                      | 需要 SSL/TLS 证书                  |

📝**面试要点**：

* HTTPS 加密使用 TLS（以前是 SSL）
* 掌握加密过程简要步骤（对称加密 + 非对称加密 + 证书）

------

### 7. **HTTP1.0 / 1.1 / 2.0 / 3.0 的区别？**

| 特性     | HTTP/1.0 | HTTP/1.1                   | HTTP/2     | HTTP/3             |
| -------- | -------- | -------------------------- | ---------- | ------------------ |
| 连接复用 | 不支持   | 支持持久连接（keep-alive） | 多路复用   | 多路复用           |
| 请求并发 | ❌        | ❌                          | ✅          | ✅                  |
| 头部压缩 | ❌        | ❌                          | ✅（HPACK） | ✅（QPACK）         |
| 传输协议 | TCP      | TCP                        | TCP        | **QUIC (基于UDP)** |
| 队头阻塞 | 是       | 是                         | 改善       | 彻底解决           |

📝**面试要点**：

* 多路复用：一个连接同时传多个请求（解决队头阻塞）
* HTTP/3 的 QUIC 使用 UDP，性能更好

------

### 8. **常见 HTTP 状态码及含义？**

| 状态码 | 含义                           |
| ------ | ------------------------------ |
| 200    | OK，成功                       |
| 301    | 永久重定向                     |
| 302    | 临时重定向                     |
| 304    | 未修改，使用缓存               |
| 400    | 请求有误（客户端问题）         |
| 401    | 未认证（需登录）               |
| 403    | 拒绝访问（无权限）             |
| 404    | 资源未找到                     |
| 500    | 服务器内部错误                 |
| 502    | 网关错误（如Nginx接上游失败）  |
| 503    | 服务不可用（通常是过载或维护） |

📝**面试要点**：

* 理解缓存相关状态（304）
* 安全相关（401 vs 403）
* 常见调试排查状态码

------

### 9. **什么是长连接与短连接？举例说明？**

* **短连接**：每次请求都建立新连接，响应后断开（如 HTTP/1.0）
* **长连接**：建立连接后可复用（如 HTTP/1.1 的 `keep-alive`）

#### 举例：

* HTTP/1.0 默认短连接，浏览器访问网页中10个资源就建立10次连接。
* HTTP/1.1 通过 `Connection: keep-alive` 复用连接，提高性能。

📝**面试要点**：

* WebSocket 属于更高级的“持久长连接”，适用于实时通信。

------

### 10. **Cookie、Session 和 Token 的区别？**

| 特性     | Cookie           | Session        | Token                    |
| -------- | ---------------- | -------------- | ------------------------ |
| 存储位置 | 浏览器           | 服务器         | 客户端（如localStorage） |
| 状态     | 有状态           | 有状态         | 通常用于无状态认证       |
| 跨域支持 | 受限             | 无             | 跨域方便（配合 CORS）    |
| 安全性   | 容易被劫持       | 较高           | 可加密                   |
| 场景     | 浏览器端状态维护 | 服务端会话控制 | 前后端分离、移动端认证   |

📝**面试要点**：

* Cookie 是客户端机制；Session 是服务器端机制；
* Token（如 JWT）用于无状态认证，适合微服务/API架构。

------

### 11. **DNS 的工作过程？**

#### 简略过程：

1. 浏览器缓存中查找 → 找不到则：
2. 操作系统缓存
3. `hosts` 文件
4. 本地 DNS 服务器（通常是 ISP 提供的）
5. 根 DNS 服务器
6. 顶级域（.com/.net/.cn）
7. 权威 DNS 服务器 → 返回 IP
8. 本地 DNS 缓存并返回给客户端

📝**面试要点**：

* DNS 解析是逐级查询
* 支持缓存，大量减少请求耗时
* 可被攻击（如 DNS 劫持）

---

好的，接下来我们进入第三部分 —— **TCP 深入理解**，这部分是后端开发、系统开发、网络工程岗位高频考点。

------

## 🔹 三、TCP 深入理解

### 12. **滑动窗口机制是什么？拥塞控制怎么做的？**

#### ✅ 滑动窗口（Flow Control 流量控制）：

* 目的：**避免发送方发送速度远远大于接收方处理能力**。
* 机制：接收方通过“窗口大小”告知发送方“我还能接收多少数据”，发送方据此控制发送速率。

#### 举例说明：

1. 假设窗口大小是 4 个包，发送方最多可以连续发送 4 个未被确认的包；
2. 一旦收到 ACK，窗口滑动，继续发送。

#### ✅ 拥塞控制（Congestion Control）：

* 目的：**避免网络过载崩溃（如丢包）**
* 核心机制（四种算法）：
  * **慢启动（Slow Start）**：初始速率低，逐步指数增长
  * **拥塞避免（Congestion Avoidance）**：达到阈值后线性增长
  * **快重传（Fast Retransmit）**：无需等待超时，只需连续收到3个ACK重复，即可重传
  * **快恢复（Fast Recovery）**：快速回到合理速率，避免回到慢启动

📝**面试要点**：

* 滑动窗口：控制双方通信节奏（接收方控制）
* 拥塞控制：避免全网崩溃（发送方控制）
* 能画示意图更佳

------

### 13. **TCP为什么可靠？如何保证可靠性？**

✅ TCP的可靠性来自多个机制：

| 机制                      | 功能                                     |
| ------------------------- | ---------------------------------------- |
| 序列号（Sequence Number） | 标记每个字节，接收方能重排、判断是否缺失 |
| 确认应答（ACK）           | 收到数据后确认，超时重传                 |
| 超时重传                  | ACK超时未收到则重传数据                  |
| 校验和（Checksum）        | 校验数据是否被破坏                       |
| 流量控制                  | 防止接收方被压垮                         |
| 拥塞控制                  | 防止网络崩溃                             |

📝**面试要点**：

* TCP 保证“有序、无重复、无丢失”
* 可结合三次握手、滑动窗口、ACK 描述“可靠性如何实现”

------

### 14. **TCP 的流量控制和拥塞控制有何不同？**

| 区别项   | 流量控制（Flow Control） | 拥塞控制（Congestion Control） |
| -------- | ------------------------ | ------------------------------ |
| 控制对象 | **发送方 vs 接收方**     | **发送方 vs 整个网络**         |
| 目的是   | 不压垮接收方             | 避免网络过载、拥堵             |
| 实现手段 | 滑动窗口                 | 慢启动、快重传等               |
| 控制窗口 | 接收窗口（rwnd）         | 拥塞窗口（cwnd）               |

📝**面试要点**：

* 区分控制对象不同、窗口类型不同
* 可结合一起问：“TCP 有哪些窗口？rwnd、cwnd、swnd 有什么区别？”

------

### 15. **为什么 TIME_WAIT 状态需要等待 2MSL？有什么作用？**

#### TIME_WAIT 是 TCP 四次挥手最后客户端的状态。

* MSL（Maximum Segment Lifetime）：最大报文生命周期（如30s~2min）
* **等待 2MSL 的作用**：
  1. 确保最后一个 ACK 报文能到达对方（若丢失，对方可重发 FIN）
  2. 避免老的重复数据影响后续新连接（如 IP+端口 相同）

📝**面试要点**：

* TIME_WAIT 状态由主动关闭方进入
* 避免“连接复用”中造成数据错乱
* 有时可优化（SO_REUSEADDR），但需谨慎！

------

继续为你讲解第四部分：**性能优化与实际开发类网络问题**。

------

## 🔹 四、性能优化与网络实践

### 16. **CDN 的作用？原理是什么？**

✅ **CDN（内容分发网络）**：
 将静态资源（如图片、JS、CSS、视频等）缓存到全球各地的“边缘节点”，就近分发，提高访问速度，减少源服务器压力。

#### 📌 主要作用：

* **加快加载速度**（访问最近的节点）
* **降低服务器负载**
* **抗 DDoS 攻击**
* **稳定带宽、减少丢包**

#### 📌 原理流程：

用户访问资源 → 先请求 CDN 节点 → 若有缓存则直接返回（命中） → 若无缓存则回源拉取 → 缓存后再响应用户。

📝**面试要点**：

* CDN 适合缓存“静态资源”
* 分布式部署、边缘计算趋势也在走 CDN 路线

------

### 17. **浏览器缓存有哪些？强缓存和协商缓存的区别？**

✅ **强缓存（直接用缓存）**：

* 响应头设置 `Cache-Control: max-age=xxx` 或 `Expires`
* 浏览器在缓存有效期内不发送请求，直接读取本地缓存

✅ **协商缓存（向服务器验证）**：

* 请求头带上：
  * `If-Modified-Since`（配合 `Last-Modified`）
  * `If-None-Match`（配合 `ETag`）
* 服务器检查是否资源变更：
  * 没变：返回 304 + 空 body，继续使用缓存
  * 有变：返回新内容

| 对比           | 强缓存           | 协商缓存 |
| -------------- | ---------------- | -------- |
| 是否请求服务器 | ❌                | ✅        |
| 响应状态码     | 200 (from cache) | 304      |
| 性能           | 更快             | 较快     |

📝**面试要点**：

* 说出响应头和请求头的名称（`ETag`、`If-None-Match`）
* 能画流程图展示浏览器缓存机制最佳

------

### 18. **WebSocket 和 HTTP 的区别？WebSocket 工作原理？**

✅ **HTTP** 是短连接/请求响应模式，一问一答。

✅ **WebSocket** 是基于 TCP 的**全双工、长连接协议**，适用于实时场景，如聊天、在线游戏。

#### 📌 工作原理：

1. 客户端发起 HTTP 请求，包含 `Upgrade: websocket`，意图切换协议
2. 服务器返回 `101 Switching Protocols`，协议升级成功
3. 双方建立长连接，客户端与服务端可**互发消息**

📝**面试要点**：

* WebSocket 适合推送、实时性要求高的应用
* WebSocket 连接建立仍需先走一次 HTTP
* HTTP 是单向的，WebSocket 是双向的

------

### 19. **前端跨域的本质？有哪些解决方式？**

✅ **本质**：浏览器的**同源策略（Same-Origin Policy）**限制 JS 访问不同源的资源。

#### 典型跨域：协议、域名、端口任一不同都算跨域

例：`http://a.com:8080` 无法直接请求 `https://b.com:443/api`

#### 解决方式：

| 方式                   | 说明                                                      |
| ---------------------- | --------------------------------------------------------- |
| ✅ CORS                 | 服务端设置响应头：`Access-Control-Allow-Origin`，主流方案 |
| ✅ JSONP                | 只能用于 GET，请求由 `<script>` 标签触发                  |
| ✅ 反向代理             | 前端请求 `/api`，由代理服务器转发                         |
| ✅ iframe + postMessage | 适用于窗口通信                                            |
| ✅ WebSocket            | 不受同源策略限制                                          |

📝**面试要点**：

* 熟悉 CORS 配置（特别是 `Access-Control-Allow-Credentials`）
* 能说清楚“浏览器限制 vs 服务器配置”

------

### 20. **前端优化网络性能的方式有哪些？**

#### ✅ 常见优化手段：

| 分类     | 优化方式                              |
| -------- | ------------------------------------- |
| 资源体积 | 压缩（gzip、br）、压缩图片、懒加载    |
| 请求数   | 合并文件、雪碧图、使用 CDN            |
| 缓存     | 使用 Cache-Control、ETag              |
| 协议     | 使用 HTTP/2、启用 TLS1.3、开启 QUIC   |
| 连接复用 | 长连接、Keep-Alive、多路复用          |
| 首屏速度 | SSR 服务端渲染、预加载 `preload`      |
| 网络传输 | 使用 CDN、避免重定向、开启 DNS 预解析 |

📝**面试要点**：

* 能从网络、浏览器、资源、协议多角度说优化措施
* 熟悉 Chrome DevTools 中的网络分析指标

------

好的，继续为你讲解第五部分 —— **网络安全类问题**，这些问题在前端、后端、安全岗位都非常高频，尤其在谈及 Web 开发经验时，面试官常会考你对攻击原理和防御手段的理解。

------

## 🔹 五、网络安全类问题

### 21. **什么是 XSS 攻击？如何防御？**

✅ **XSS（Cross-Site Scripting，跨站脚本攻击）**：攻击者在网页中注入恶意 JS 脚本，诱导用户执行，从而盗取敏感信息，如 Cookie、用户信息等。

#### XSS 攻击分类：

| 类型       | 说明                        | 示例                                    |
| ---------- | --------------------------- | --------------------------------------- |
| **反射型** | 恶意脚本嵌在 URL，点击触发  | URL 中传入 `<script>alert(1)</script>`  |
| **存储型** | 恶意脚本被存到数据库/评论中 | 评论内容为 JS 脚本，所有用户访问就执行  |
| **DOM 型** | 前端 JS 处理不当引发        | 如：`innerHTML(location.hash)` 直接执行 |

#### ✅ 防御措施：

1. **对用户输入进行转义/过滤**（如使用 `xss` npm 库，或 Vue/React 内建机制）
2. **输出时内容编码**（如防止 `<script>` 被解释）
3. **使用 CSP（内容安全策略）** 限制 JS 加载来源
4. **禁止 innerHTML / eval / document.write 等敏感 API**

📝**面试要点**：

* 区分三种类型的 XSS
* 能说出 CSP 配置例子（如 `Content-Security-Policy: script-src 'self'`）

------

### 22. **什么是 CSRF 攻击？如何防御？**

✅ **CSRF（Cross-Site Request Forgery，跨站请求伪造）**：攻击者诱导用户在已登录的状态下访问第三方恶意网站，自动发起请求操作（如转账、删除）到可信网站。

#### 攻击条件：

* 用户已登录可信站点（浏览器带 Cookie）
* 未校验请求来源

#### ✅ 防御措施：

1. **验证 Referer / Origin**：后端校验请求是否来自本站
2. **CSRF Token 机制**：每次请求带唯一 Token，由后端验证
3. **SameSite Cookie 属性**：
   * `Strict`：完全禁止跨站携带
   * `Lax`：GET 允许，POST 拒绝（默认）
   * `None + Secure`：跨站时必须 HTTPS
4. **禁止 GET 执行修改操作**（如删除/支付等操作必须用 POST）

📝**面试要点**：

* CSRF 的重点在于“身份伪造”，利用浏览器自动带 Cookie
* Token 机制和 SameSite 是现代主流防御手段

------

### 23. **DDoS 攻击是什么？如何防御？**

✅ **DDoS（分布式拒绝服务攻击）**：攻击者利用大量肉鸡（受控主机）对目标网站同时发送大量请求，耗尽资源，造成网站崩溃或拒绝服务。

#### 常见攻击类型：

* **流量型攻击**：如 UDP Flood、SYN Flood、HTTP Flood
* **资源耗尽型**：慢连接、持续占用连接、数据库写操作
* **DNS 放大攻击**：利用 DNS 响应放大几十倍

#### ✅ 防御手段：

1. **启用防火墙 / WAF**
2. **使用 CDN + 云防护服务**（如 Cloudflare、阿里云盾）
3. **限流 + 速率限制**（如 nginx、API Gateway 限制 IP 请求频率）
4. **服务集群 / 弹性扩容**
5. **自动识别异常流量 + 黑名单封禁**

📝**面试要点**：

* 区分 CC 攻击（应用层） vs SYN Flood（传输层）
* 提出具体限流方案（如漏桶、令牌桶）

------

### 24. **HTTPS 是如何加密的？介绍 TLS 握手过程？**

✅ **HTTPS = HTTP + TLS（原 SSL）**

#### TLS 握手流程简化如下（以 TLS 1.2 为例）：

1. 客户端发送：支持的协议版本、随机数、加密套件
2. 服务器返回：证书、公钥、随机数、加密方式
3. 客户端验证证书（CA）、生成对称密钥，使用公钥加密并发送
4. 双方开始使用对称密钥通信（高效）

#### ✅ 加密用到：

* **非对称加密**（传输密钥）→ 公钥加密，私钥解密
* **对称加密**（传输数据）→ AES 等加密整个内容
* **哈希函数 + MAC**（数据完整性验证）

#### TLS 1.3 优化：

* 减少握手轮次（1-RTT）
* 默认加密更多内容
* 移除 RSA 握手方式（更安全）

📝**面试要点**：

* 掌握混合加密的原理
* 简洁讲解握手流程，能画图更佳

------

好的，接下来是最后一组：**系统设计 / 部署相关网络问题**，这一部分偏后端开发、架构设计与部署运维，是面试中区分“是否具备工程实战能力”的关键指标。

------

## 🔹 六、系统设计与部署类问题

### 25. **反向代理和正向代理的区别？为什么 Nginx 常做反向代理？**

✅ **正向代理**（Forward Proxy）：

* 客户端 → 代理服务器 → 互联网资源
* 代理客户端身份（常用于翻墙、爬虫）
* 客户端要配置代理

✅ **反向代理**（Reverse Proxy）：

* 客户端 → 反向代理服务器（如 Nginx）→ 后端服务器
* 隐藏服务器真实地址，代理服务器决定转发到哪个服务
* 常用于：负载均衡、缓存、SSL终端、统一入口等

| 对比项   | 正向代理     | 反向代理        |
| -------- | ------------ | --------------- |
| 谁配代理 | 客户端       | 服务端          |
| 目的     | 访问外网资源 | 提供统一入口    |
| 常见应用 | 爬虫、VPN    | Nginx、API 网关 |

📝**面试要点**：

* 说清“正向代理代理客户端，反向代理代理服务器”
* 能说明 Nginx 做反向代理的用途（如 SSL 解密、负载均衡）

------

### 26. **负载均衡的常见策略有哪些？各有什么特点？**

✅ **常见策略**：

| 策略                                | 特点                                        |
| ----------------------------------- | ------------------------------------------- |
| **轮询（Round Robin）**             | 简单、平均分配，适合无状态服务              |
| **最少连接数（Least Connections）** | 动态选择当前最空闲服务                      |
| **IP Hash**                         | 同一客户端 IP 会命中同一服务器（保持会话）  |
| **加权轮询**                        | 根据服务器性能分配权重                      |
| **一致性哈希**                      | 适合分布式缓存，减少迁移（如 Redis、Dubbo） |

📝**面试要点**：

* 说明适用场景（如：会话保持用 IP Hash）
* 轮询适合什么？最小连接适合什么？

------

### 27. **什么是长连接、短连接？HTTP 是哪种？**

✅ **长连接（Keep-Alive）**：

* 建立一次 TCP 连接，多个请求复用
* 省去了频繁建立/关闭连接的成本
* 典型应用：HTTP/1.1 默认开启 Keep-Alive

✅ **短连接**：

* 每次请求都重新建立连接，用完就断
* 适用于请求不频繁场景

| 协议     | 默认行为                           |
| -------- | ---------------------------------- |
| HTTP/1.0 | 短连接（需手动设置 Keep-Alive）    |
| HTTP/1.1 | 默认长连接                         |
| HTTP/2   | 支持**多路复用**，更先进的连接管理 |

📝**面试要点**：

* HTTP 默认是短连接 or 长连接？（看版本）
* 长连接提高了效率但会占用更多内存

------

### 28. **什么是多路复用？HTTP/2 是如何提升性能的？**

✅ **多路复用（Multiplexing）**：
 多个请求在同一个 TCP 连接中并行交错发送，互不阻塞。

#### HTTP/1.x 问题：

* 同一个连接只能处理一个请求，阻塞后续请求（队头阻塞）
* 浏览器需开多个连接（有连接数限制）

#### HTTP/2 改进：

* 引入 **帧（frame）和流（stream）**，多个流在一条连接中交错传输
* 支持 **头部压缩**（HPACK）
* 支持 **服务器推送**（server push）

📝**面试要点**：

* HTTP/2 核心优势：多路复用 + 头部压缩 + 推送
* 能画出流 ID 示例更佳

------

### 29. **HTTP 和 gRPC 的区别？gRPC 有什么优势？**

✅ **HTTP/REST**：

* 基于文本（JSON）
* 通常用在浏览器、公开 API
* 语言无关、开发方便

✅ **gRPC**：

* Google 推出的 RPC 框架，基于 HTTP/2 + protobuf
* 使用 protobuf 传输：**二进制格式，速度快**
* 天生支持 **双向流**、多路复用、流控

| 对比项   | REST (HTTP/JSON) | gRPC (HTTP/2 + protobuf)    |
| -------- | ---------------- | --------------------------- |
| 数据格式 | JSON（可读）     | protobuf（二进制，快）      |
| 性能     | 较慢             | 快                          |
| 双向流   | 不支持           | 支持                        |
| 支持语言 | 所有             | 多种语言（有 proto 生成器） |
| 开发难度 | 低               | 相对高                      |

📝**面试要点**：

* gRPC 更适合服务间通信（微服务）
* REST 更适合对外暴露 API

------

### 30. **如何理解端口复用？多个服务监听一个端口可行吗？**

✅ **端口复用指同一 IP+端口 上支持多个连接**，靠的是完整四元组唯一性：

* 源 IP、源端口、目标 IP、目标端口

✅ 常见情况：

* 一个服务器的 80 端口可以同时接受多个客户端请求（连接不同）
* 多个服务监听同一个端口不行，**但可以由反向代理做路由转发**

#### 特殊情况：

* 使用 `SO_REUSEPORT`（Linux 内核支持）：多个进程监听同一端口，由系统分配
* HTTP2、QUIC 实现连接复用时，也涉及端口复用

📝**面试要点**：

* 端口复用依赖四元组唯一性
* 多个服务监听同一端口不能直接实现，但可通过代理转发或复用机制实现

------

## ✅ 总结

我们完整讲解了 **计算机网络常见面试题 30 道**，按类别如下：

| 分类     | 内容小结                            |
| -------- | ----------------------------------- |
| 基础     | OSI 七层模型、HTTP 方法、TCP vs UDP |
| 协议     | 三次握手、四次挥手、TCP 标志位      |
| TCP 机制 | 滑动窗口、可靠性、TIME_WAIT         |
| 优化实践 | CDN、缓存、跨域、WebSocket          |
| 安全     | XSS、CSRF、DDoS、HTTPS              |
| 系统设计 | 代理、负载均衡、HTTP2、gRPC         |

如你有特定面试方向（如前端、后端、微服务、DevOps、安全），我可以基于这份内容再帮你 **定向精选高频题 + 高质量答案**，需要我帮你归纳吗？